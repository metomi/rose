

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Application Configuration &mdash; Rose Documentation 2.0rc2 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/diff_selector.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/grid_table.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/hieroglyph_theme_addons.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/tutorial.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/addons.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/rose-favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/js/diff_selector.js"></script>
        <script src="../../_static/js/minicylc.js"></script>
        <script src="../../_static/js/spoiler.js"></script>
        <script src="../../_static/js/addons.js"></script>
        <script src="../../_static/js/versioning.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Suite Configuration" href="suite.html" />
    <link rel="prev" title="Rose Configuration" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html">
            <img src="../../_static/rose-logo-crop.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.0rc2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/rose/index.html">Rose Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Rose API Reference</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Rose Configuration</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Application Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="suite.html">Suite Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="site-and-user.html">Site And User Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="metadata.html">Configuration Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="rose-configuration-format.html">Rose Configuration Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="file-creation.html">File Creation Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">Rose Configuration API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../command-reference.html">Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../environment-variables.html">Rose Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other.html">Other Python API Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rose-bash-library.html">Rose Bash Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rose-built-in-applications.html">Rose Built-In Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rose-macro.html">Rose Macro API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rose-upgrader-macros.html">Rose Upgrade Macro API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rosie-web.html">Rosie Web API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../terms.html">Rose Terms Of Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../course/um-ut.html">UM User Tutorial</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Rose Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Rose Configuration</a> &raquo;</li>
      <li>Application Configuration</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="application-configuration">
<span id="rose-applications"></span><h1>Application Configuration<a class="headerlink" href="#application-configuration" title="Permalink to this headline">ÔÉÅ</a></h1>
<p>The configuration of an application is represented by a directory. It may
contain the following:</p>
<ul>
<li><p><a class="reference internal" href="#rose:file:rose-app.conf" title="rose:file:rose-app.conf"><code class="xref rose rose-file docutils literal notranslate"><span class="pre">rose-app.conf</span></code></a> - a compulsory configuration file in the
modified INI format. It contains the following information:</p>
<ul class="simple">
<li><p>the command(s) to run.</p></li>
<li><p>the metadata type for the application.</p></li>
<li><p>the list of environment variables.</p></li>
<li><p>other configurations that can be represented in un-ordered <code class="docutils literal notranslate"><span class="pre">key=value</span></code>
pairs, e.g. Fortran namelists.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">file/</span></code> directory: other input files, e.g.:</p>
<ul class="simple">
<li><p>FCM configuration files (requires ordering of <code class="docutils literal notranslate"><span class="pre">key=value</span></code> pairs).</p></li>
<li><p>STASH files.</p></li>
<li><p>other configuration files that require more than <code class="docutils literal notranslate"><span class="pre">section=key=value</span></code>.</p></li>
</ul>
<p>Files in this directory are copied to the working directory in run time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If there is a clash between a <code class="docutils literal notranslate"><span class="pre">[file:*]</span></code> section and a file under
<code class="docutils literal notranslate"><span class="pre">file/</span></code>, the setting in the <code class="docutils literal notranslate"><span class="pre">[file:*]</span></code> section takes precedence.
E.g. Suppose we have a file <code class="docutils literal notranslate"><span class="pre">file/hello.txt</span></code>. In the absence of
<code class="docutils literal notranslate"><span class="pre">[file:hello.txt]</span></code>, it will copy <code class="docutils literal notranslate"><span class="pre">file/hello.txt</span></code> to
<code class="docutils literal notranslate"><span class="pre">$PWD/hello.txt</span></code> in run time. However, if we have a
<code class="docutils literal notranslate"><span class="pre">[file:hello.txt]</span></code> section and a <code class="docutils literal notranslate"><span class="pre">source=SOURCE</span></code> setting, then it
will install the file from <code class="docutils literal notranslate"><span class="pre">SOURCE</span></code> instead. If we have
<code class="docutils literal notranslate"><span class="pre">[!file:hello.txt]</span></code>, then the file will not be installed at all.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">bin/</span></code> directory for e.g. scripts and executables used by the application
at run time. If a <code class="docutils literal notranslate"><span class="pre">bin/</span></code> exists in the application configuration, it will
prepended to the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> environment variable at run time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta/</span></code> directory for the metadata of the application.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">opt/</span></code> directory (see <a class="reference internal" href="rose-configuration-format.html#optional-configuration"><span class="std std-ref">Optional Configuration</span></a>).</p></li>
</ul>
<p>E.g. The application configuration directory may look like:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./bin/
./rose-app.conf
./file/file1
./file/file2
./meta/rose-meta.conf
./opt/rose-app-extra1.conf
./opt/rose-app-extra2.conf
...
</pre></div>
</div>
</div></blockquote>
<dl class="rose file">
<dt class="sig sig-object rose" id="rose:file:rose-app.conf">
<em class="property"><span class="pre">Rose</span> <span class="pre">Configuration</span> </em><span class="sig-name descname"><span class="pre">rose-app.conf</span></span><a class="headerlink" href="#rose:file:rose-app.conf" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf|file-install-root">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">file-install-root</span></span><a class="headerlink" href="#rose:conf:rose-app.conf|file-install-root" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Root level setting. Specify the root directory to install file targets
that are specified with a relative path.</p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf|meta">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">meta</span></span><a class="headerlink" href="#rose:conf:rose-app.conf|meta" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Root level setting. Specify the configuration metadata for the
application. This is ignored by the application runner, but may be used
by other Rose utilities, such as <a class="reference internal" href="../command-reference.html#command-rose-config-edit"><span class="std std-ref">rose config-edit</span></a>.
It can be used to specify the application type.</p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf|mode">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">mode</span></span><a class="headerlink" href="#rose:conf:rose-app.conf|mode" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Root level setting. Specify the name of a built-in application,
instead of running a command specified in the <a class="reference internal" href="#rose:conf:rose-app.conf[command]" title="rose:conf:rose-app.conf[command]"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">[command]</span></code></a>
section.</p>
<p>See also <a class="reference internal" href="../rose-built-in-applications.html#rose-built-in-applications"><span class="std std-ref">Rose Built-In Applications</span></a>.</p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf|opts">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">opts</span></span><a class="headerlink" href="#rose:conf:rose-app.conf|opts" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Hardcode an optional configuration to be used by the application. It is
generally better to specify optional configurations using the
<span class="target" id="index-0"></span><a class="reference internal" href="../environment-variables.html#envvar-ROSE_APP_OPT_CONF_KEYS"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">ROSE_APP_OPT_CONF_KEYS</span></code></a> environment variable or
<code class="docutils literal notranslate"><span class="pre">--opt-conf-key</span></code> argument both of which work with
<a class="reference internal" href="../command-reference.html#command-rose-app-run"><span class="std std-ref">rose app-run</span></a> and <a class="reference internal" href="../command-reference.html#command-rose-task-run"><span class="std std-ref">rose task-run</span></a>.</p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[command]">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">[command]</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[command]" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Specify the command(s) to run.</p>
<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[command]default">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">default</span></span><em class="property"><span class="pre">=</span> <span class="pre">COMMAND</span></em><a class="headerlink" href="#rose:conf:rose-app.conf[command]default" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Compulsory</dt>
<dd class="field-odd"><p>True</p>
</dd>
</dl>
<p>Specify the default command to run.</p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[command]ALTERNATE">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">ALTERNATE</span></span><em class="property"><span class="pre">=</span> <span class="pre">COMMAND</span></em><a class="headerlink" href="#rose:conf:rose-app.conf[command]ALTERNATE" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Specify an alternate command referred to by the name <code class="docutils literal notranslate"><span class="pre">ALTERNATE</span></code>
which can be selected at runtime.</p>
<p>See the <a class="reference internal" href="../../tutorial/rose/furthertopics/command-keys.html#rose-tutorial-command-keys"><span class="std std-ref">Command Keys</span></a> tutorial.</p>
</dd></dl>

</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[env]">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">[env]</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[env]" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Specify environment variables to be provided to the
<a class="reference internal" href="#rose:conf:rose-app.conf[command]" title="rose:conf:rose-app.conf[command]"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">[command]</span></code></a> at runtime.</p>
<p>The usual <code class="docutils literal notranslate"><span class="pre">$NAME</span></code> or <code class="docutils literal notranslate"><span class="pre">${NAME}</span></code> syntax can be used in values to
reference environment variables that are already defined when the
application runner is invoked. However, it is unsafe to reference other
environment variables defined in this section.</p>
<p>If the value of an environment variable setting begins with a tilde
<code class="docutils literal notranslate"><span class="pre">~</span></code>, all of the characters preceding the first slash <code class="docutils literal notranslate"><span class="pre">/</span></code> are
considered a <em>tilde-prefix</em>. Where possible, a tilde-prefix is replaced
with the home directory associated with the specified login name at run
time.</p>
<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[env]KEY">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">KEY</span></span><em class="property"><span class="pre">=</span> <span class="pre">VALUE</span></em><a class="headerlink" href="#rose:conf:rose-app.conf[env]KEY" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Define an environment variable <code class="docutils literal notranslate"><span class="pre">KEY</span></code> with the value <code class="docutils literal notranslate"><span class="pre">VALUE</span></code>.</p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[env]UNDEF">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">UNDEF</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[env]UNDEF" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>A special variable that is always undefined at run time.</p>
<p>Reference to it will cause a failure at run time. It can be used to
indicate that a value must be overridden at run time.</p>
</dd></dl>

</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[etc]">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">[etc]</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[etc]" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Specify misc. settings.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Currently, only UM defs for science sections are
thought to require this section.</p>
</div>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[file:TARGET]">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">[file:TARGET]</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[file:TARGET]" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Specify a file/directory to be installed. <code class="docutils literal notranslate"><span class="pre">TARGET</span></code> should be a path
relative to the run time <code class="docutils literal notranslate"><span class="pre">$PWD</span></code> or <code class="docutils literal notranslate"><span class="pre">STDIN</span></code>.</p>
<p>E.g. <code class="docutils literal notranslate"><span class="pre">file:app/APP=source=LOCATION</span></code>.</p>
<p>For a list of configuration options see <a class="reference internal" href="file-creation.html#rose:conf:*[file:TARGET]" title="rose:conf:*[file:TARGET]"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">*[file:TARGET]</span></code></a> for
details.</p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[namelist:NAME]">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">[namelist:NAME]</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[namelist:NAME]" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Specify a Fortran namelist with the group name called <code class="docutils literal notranslate"><span class="pre">NAME</span></code>, which
can be referred to by a <a class="reference internal" href="file-creation.html#rose:conf:*[file:TARGET]source" title="rose:conf:*[file:TARGET]source"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">*[file:TARGET]source</span></code></a> setting of
a file.</p>
<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[namelist:NAME]KEY">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">KEY</span></span><em class="property"><span class="pre">=</span> <span class="pre">VALUE</span></em><a class="headerlink" href="#rose:conf:rose-app.conf[namelist:NAME]KEY" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Define a new namelist setting <code class="docutils literal notranslate"><span class="pre">KEY</span></code> set to <code class="docutils literal notranslate"><span class="pre">VALUE</span></code> exactly like a
Fortran namelist, but without the trailing comma.</p>
</dd></dl>

<p>Namelists can be grouped in two ways:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[namelist:NAME(SORT-INDEX)]</span></code></p>
<ul class="simple">
<li><p>This allows different namelist files to have namelists with the same
group name. These will all inherit the same group configuration
metadata (from <code class="docutils literal notranslate"><span class="pre">[namelist:NAME]</span></code>).</p></li>
<li><p>This allows the <code class="docutils literal notranslate"><span class="pre">source</span></code> setting of a file to refer to all
<code class="docutils literal notranslate"><span class="pre">[namelist:NAME(SORT-INDEX)]</span></code> as <code class="docutils literal notranslate"><span class="pre">namelist:NAME(:)</span></code>, and the
namelist groups will be sorted alphanumerically by the
<code class="docutils literal notranslate"><span class="pre">SORT-INDEX</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">[namelist:NAME{CATEGORY}]</span></code></p>
<ul class="simple">
<li><p>This allows the same namelist
to have different usage and configuration metadata according to its
category. Namelists will inherit configuration metadata from their
basic group <code class="docutils literal notranslate"><span class="pre">[namelist:NAME]</span></code> as well as from their specific
category <code class="docutils literal notranslate"><span class="pre">[namelist:NAME{CATEGORY}]</span></code>.</p></li>
</ul>
</li>
</ol>
<p>These groupings can be combined: <code class="docutils literal notranslate"><span class="pre">[namelist:NAME{CATEGORY}(SORT-INDEX)]</span></code></p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[poll]">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">[poll]</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[poll]" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>Specify prerequisites to poll for before running the actual application.
Three types of tests can be performed:</p>
<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[poll]all-files">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">all-files</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[poll]all-files" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>A list of space delimited list of file paths. This test
passes only if all file paths in the list exist. Accepts globs.</p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[poll]any-files">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">any-files</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[poll]any-files" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>A list of space delimited list of file paths. This test
passes if any file path in the list exists. Accepts globs.</p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[poll]test">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">test</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[poll]test" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>A shell command. This test passes if the command returns a 0
(zero) return code.</p>
<p>This test is run in addition to
the <a class="reference internal" href="#rose:conf:rose-app.conf[poll]all-files" title="rose:conf:rose-app.conf[poll]all-files"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">all-files</span></code></a> and <a class="reference internal" href="#rose:conf:rose-app.conf[poll]any-files" title="rose:conf:rose-app.conf[poll]any-files"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">any-files</span></code></a>
tests for the existence of file paths.</p>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[poll]file-test">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">file-test</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[poll]file-test" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>A shell command run for each file path, where <code class="docutils literal notranslate"><span class="pre">{}</span></code> is substituted
for the file path at runtime. This test passes if the command returns
a 0 (zero) return code for all paths in <code class="docutils literal notranslate"><span class="pre">all-files</span></code>
and any path in <code class="docutils literal notranslate"><span class="pre">any-files</span></code>.</p>
<p>If <a class="reference internal" href="#rose:conf:rose-app.conf[poll]test" title="rose:conf:rose-app.conf[poll]test"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">test</span></code></a> is not enough, e.g. you want to test for the
existence of a string in each file, you can specify a
<a class="reference internal" href="#rose:conf:rose-app.conf[poll]file-test" title="rose:conf:rose-app.conf[poll]file-test"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">file-test</span></code></a> to do a <code class="docutils literal notranslate"><span class="pre">grep</span></code>. E.g.:</p>
<div class="highlight-rose notranslate"><div class="highlight"><pre><span></span><span class="nv">all-files</span><span class="o">=</span><span class="s">file1 file2</span>
<span class="nv">file-test</span><span class="o">=</span><span class="s">test -e {} &amp;&amp; grep -q &#39;hello&#39; {}</span>
</pre></div>
</div>
<p>At runtime, any <code class="docutils literal notranslate"><span class="pre">{}</span></code> in the command is replaced
with the name of the file (or glob pattern).
The example above tests that both
<code class="docutils literal notranslate"><span class="pre">file1</span></code> and <code class="docutils literal notranslate"><span class="pre">file2</span></code> exist and that they both contain the
string <code class="docutils literal notranslate"><span class="pre">hello</span></code>. It is run for each path/pattern, so the
example above would be equivalent to:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">test</span> -e file1 <span class="o">&amp;&amp;</span> grep -q <span class="s1">&#39;hello&#39;</span> file1
<span class="nb">test</span> -e file2 <span class="o">&amp;&amp;</span> grep -q <span class="s1">&#39;hello&#39;</span> file2
</pre></div>
</div>
</dd></dl>

<dl class="rose conf">
<dt class="sig sig-object rose" id="rose:conf:rose-app.conf[poll]delays">
<em class="property"><span class="pre">Config</span> </em><span class="sig-name descname"><span class="pre">delays</span></span><a class="headerlink" href="#rose:conf:rose-app.conf[poll]delays" title="Permalink to this definition">ÔÉÅ</a></dt>
<dd><p>The above tests will only be performed once when the application
runner starts. If a list of <a class="reference internal" href="#rose:conf:rose-app.conf[poll]delays" title="rose:conf:rose-app.conf[poll]delays"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">delays</span></code></a> are added, the tests
will be performed a number of times with delays between them. If the
prerequisites are still not met  after the number of delays, the
application runner will fail with a time out. The list is a
comma-separated list. The syntax looks like <code class="docutils literal notranslate"><span class="pre">[n*][DURATION]</span></code>,
where <code class="docutils literal notranslate"><span class="pre">DURATION</span></code> is an
<a class="reference external" href="https://cylc.github.io/cylc-doc/latest/html/tutorial/scheduling/datetime-cycling.html#tutorial-iso8601-durations" title="(in Cylc v8.0rc1)"><span class="xref std std-ref">ISO8601 duration</span></a> such as
<code class="docutils literal notranslate"><span class="pre">PT5S</span></code> (5 seconds) or <code class="docutils literal notranslate"><span class="pre">PT10M</span></code> (10 minutes), and <code class="docutils literal notranslate"><span class="pre">n</span></code> is
an optional number of times to repeat it. E.g.:</p>
<div class="highlight-rose notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default</span>
<span class="nv">delays</span><span class="o">=</span><span class="s">PT0S</span>

<span class="c1"># Poll 1 minute after the runner begins, repeat every minute 10 times</span>
<span class="nv">delays</span><span class="o">=</span><span class="s">10*PT1M</span>

<span class="c1"># Poll when runner begins,</span>
<span class="c1"># repeat every 10 seconds 6 times,</span>
<span class="c1"># repeat every minute 60 times,</span>
<span class="c1"># repeat once after 1 hour</span>
<span class="nv">delays</span><span class="o">=</span><span class="s">PT0S,6*PT10S,60*PT1M,PT1H</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Rose Configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="suite.html" class="btn btn-neutral float-right" title="Suite Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright : Copyright (C) British Crown (Met Office) &amp; Contributors. See Terms of Use. This document is released under the Open Government Licence.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note"
     aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Read the Docs</span>
    v: 2.0rc2
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions" id="version-selector">
    <script type="text/javascript">
        // NOTE: temporary variables not initiated so that they can be deleted

        // path to a root file in the current version of the documentation
        version_path = "../../.html".split('/');
        // dirname of the root dir
        version_dir = version_path
            .splice(0, version_path.length - 1)
            .join('/');
        delete version_path;
        // relative path from the current version to the documentation root
        rel_path = '../../';
        // relative path from the current document to the documentation root
        var root_dir;
        if (version_dir) {
            root_dir = version_dir + '/' + rel_path;
        } else {
            root_dir = rel_path;
        }
        delete version_dir;
        delete rel_path;
        // the name of the current version of the documentation
        const current_version = "2.0rc2";
        // the name of the builder (i.e. html)
        const current_builder = "html";
        // the name of the current page
        const current_page_name = "api/configuration/application";
    </script>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  
<style>
/* make sidebar header off-white. NB: only very light colours work given image
   edge transparency issues, but white itself clashes with the main pages.  */
.wy-side-nav-search, .wy-nav-top {
    background: #f9f9eb;
}
/* make sidebar header version text the dark blue of the Rose logo */
.wy-side-nav-search div.version {
    color: #2B2663;
}
</style>


</body>
</html>