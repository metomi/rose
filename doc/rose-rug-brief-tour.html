<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Rose User Guide: A Brief Tour</title>
  <meta name="author" content="Rose Team, Met Office, UK" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="defaultView" content="outline" />
  <meta name="controlVis" content="visible" />
  <link rel="stylesheet" href="S5/slides.css" type="text/css" media=
  "projection" id="slideProj" />
  <link rel="stylesheet" href="S5/outline-rose.css" type="text/css" media=
  "screen" id="outlineStyle" />
  <link rel="stylesheet" href="S5/opera.css" type="text/css" media="projection"
  id="operaFix" />
  <link rel="stylesheet" type="text/css" href=
  "google-code-prettify/prettify.css" />
  <link rel="icon" href="rose-icon.png" type="image/png" />
  <link rel="shortcut icon" href="rose-icon.png" type="image/png" />
  <script src="S5/slides.js" type="text/javascript">
</script>
  <script type="text/javascript" src="jquery.min.js">
</script>
  <script type="text/javascript" src="google-code-prettify/prettify.js">
</script>
  <script type="text/javascript" src="prettify-rose-conf.js">
</script>
  <script type="text/javascript" src="prettify-cylc-suite-rc.js">
</script>
  <script type="text/javascript" src="rose-doc.js">
</script>
  <script type="text/javascript" src="rose-version.js">
</script>
</head>

<body>
  <div class="header-footer" id="body-header">
    <address>
      &copy; British Crown Copyright 2012-5 <a href=
      "http://www.metoffice.gov.uk">Met Office</a>. See <a href=
      "rose-terms-of-use.html">Terms of Use</a>.<br />
      This document is released under the <a href=
      "http://www.nationalarchives.gov.uk/doc/open-government-licence/" rel=
      "license">Open Government Licence</a>.<br />
      <span id="rose-version"></span>
    </address>

    <div class="rose-link">
      <img id="rose-icon" src="rose-icon.png" alt="Rose" />

      <p><a id="doc-home-link" href="." name="doc-home-link">Rose
      Documentation</a></p>
    </div>

    <div id="currentSlide">
      <!-- DO NOT EDIT -->
    </div>

    <div id="controls">
      <!-- DO NOT EDIT -->
    </div>

    <div class="header-footer" id="footer"></div>
  </div>

  <div id="body-main" class="presentation">
    <div class="slide">
      <h1>Rose User Guide: A Brief Tour</h1>
    </div>

    <div class="handout" id="content"></div>

    <div class="slide">
      <h2 id="intro">Introduction</h2>

      <p>This chapter of the Rose user guide attempts to introduce you to some
      fundamental aspects of Rose. We use a relatively detailed example, but
      don't worry too much about the details.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Requirements</h3>

      <p>This guide assumes that Rose, <a href=
      "http://cylc.github.io/cylc/">cylc</a> and <a href=
      "http://www.metoffice.gov.uk/research/collaboration/fcm/">FCM</a> are
      already installed and configured correctly on your system.</p>

      <p>You should also have looked at the <a href=
      "rose-rug-getting-started.html#user">Getting Started (User)</a> page.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Introduction: Two Tours</h3>

      <p>Rose gives powerful command line utilities, and can be entirely used
      within a terminal and text editor. Rose also contains graphical user
      interfaces (GUIs) for optional use. We'll give a brief tour of the
      command line interface, and then discuss the GUIs.</p>
    </div>

    <div class="slide">
      <h2 id="cli">Command Line Tour</h2>

      <p>This section takes us through the command line and text editor
      interface to Rose.</p>
    </div>

    <div class="slide">
      <h3>Create a Suite</h3>

      <p>We'll begin by creating a suite for you to work with.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Create a Suite: create</h3>

      <p>To create an empty new suite, issue the command:</p>
      <pre class="shell">
rosie create
</pre>

      <p>This command will prompt you to edit the suite discovery information
      file. Put some meaningful values in for the <em>project</em> (e.g.
      <samp>project=rose-user-guide</samp>) and the <em>title</em> settings
      (e.g. <samp>title=Brief tour</samp>). Save the file and exit the
      editor.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Create a Suite: location</h3>

      <p>A new suite will have been created in the version control system, with
      a local copy created (i.e. checked out) at <samp>$HOME/roses/$ID/</samp>
      where <var>$ID</var> is a unique ID for the new suite.</p>
    </div>

    <div class="slide">
      <h3>Populate the Suite</h3>

      <p>Change directory to the local copy of the suite and populate it by
      running the following commands:</p>
      <pre class="shell">
cd $HOME/roses/$ID # replace $ID with your suite ID
rose rug-brief-tour # Rose command to set up the tour suite
</pre>

      <p>The <samp>rose rug-brief-tour</samp> command should create some
      content for this guide within the current working directory.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Populate the Suite: rose-suite.conf</h3>

      <p>You will find the following files and sub-directories:</p>

      <ul>
        <li>A <kbd>rose-suite.conf</kbd> file: This is used to define suite
        configurations outside of cylc. E.g. inputs to the cylc suite
        configuration file, files to install at run time, etc. It is left empty
        in this example suite.</li>

        <li>A <kbd>rose-suite.info</kbd> file: This is the suite discovery
        information file which you saw when you created the suite.</li>
      </ul>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Populate the Suite: suite.rc</h3>

      <ul>
        <li>A <kbd>suite.rc</kbd> file: This is used to define configurations
        in a cylc suite. In this example, we are running:

          <ul class="incremental">
            <li><code>fcm_make</code>: a special Rose application to build an
            executable from a source file containing a <em>hello world</em>
            program</li>

            <li><code>fred_hello_world</code>, <code>my_hello_mars</code>,
            <code>my_hello_world</code>: Rose <em>applications</em> that invoke
            the <em>hello world</em> executable using different
            configurations.</li>

            <li><code>locate_fred</code>: a preparation task run each time
            before <code>fred_hello_world</code>.</li>
          </ul>
        </li>
      </ul>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Populate the Suite: suite.rc purpose</h3>

      <p>This is a <em>cycling</em> suite that repeats every 6 hours, with the
      first cycle starting at <samp>20130101T0000Z</samp> (00:00, 1 January
      2013) and the last cycle starting 1 day later at
      <samp>20130102T0000Z</samp> (00:00, 2 January 2013). Cycling suites
      typically need special start tasks to boot up - in our case,
      <code>fcm_make</code> is run at the beginning of the suite, in the first
      cycle only.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Populate the Suite: sub-directories - app</h3>

      <ul>
        <li>Sub-directories:

          <ul class="incremental">
            <li><kbd>app/</kbd>: This directory contains the configurations of
            the <em>applications</em> run by the <em>tasks</em> of the suite.
            In this example suite, the directory contains sets of application
            configurations for running the <em>hello world</em> program in
            different ways. Some of these are not used in the suite at the
            moment. <kbd>app/fcm_make/</kbd> is a special Rose application that
            invokes <code>fcm make</code> using the configuration in
            <kbd>app/fcm_make/file/fcm-make.cfg</kbd>.</li>
          </ul>
        </li>
      </ul>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Populate the Suite: sub-directories - src</h3>

      <ul>
        <li>Sub-directories:

          <ul class="incremental">
            <li><kbd>src/</kbd>: This directory contains the source file of a
            simple program that we shall run in this suite. Note: This
            directory will not normally be present in a real scientific suite,
            as source files are typically held in separate locations.</li>
          </ul>
        </li>
      </ul>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Populate the Suite: commit</h3>

      <p>At this point, you may want to have a look at the files before moving
      on to the next section. You may also want to commit your suite - if so,
      change directory to the working copy of your suite ($HOME/roses/$ID). To
      add new files for version control, run:</p>
      <pre class="shell">
fcm add -c
</pre>

      <p>To commit your changes, run:</p>
      <pre class="shell">
fcm commit
</pre>
    </div>

    <div class="slide">
      <h3>Run the Suite</h3>

      <p>Install and run the suite by using the following command:</p>
      <pre class="shell">
cd $HOME/roses/$ID # replace $ID with your suite ID
rose suite-run
</pre>

      <p>This will install your suite under <var>$HOME/cylc-run/$ID/</var>,
      start your suite with <code>cylc</code> and fire up <code>cylc gui
      $ID</code>.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Run the Suite: cylc gui</h3>

      <p>Whilst the suite is running you can explore the <code>cylc gui</code>.
      Try experimenting with different viewing options using the toolbar.</p>

      <p>The suite should run successfully to completion and shutdown (the
      status bar should indicate <samp>stopped with 'succeeded'</samp>). You
      can now quit the <code>cylc gui</code>.</p>

      <p>Note: If you quit <code>cylc gui</code> by mistake, you can restart it
      by typing <code>rose suite-gcontrol --name=$ID</code> on the command
      line.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Run the Suite: output</h3>

      <h3>View the Output</h3>

      <p>The output of your suite can be found at
      <var>$HOME/cylc-run/$ID/</var>.</p>

      <p>The sub-directory <samp>log/</samp> contains the log files produced by
      the suite. In particular, the <samp>log/job/</samp> directory contains
      the STDOUT and STDERR from each task together with the script used to run
      the task.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Run the Suite: Rose Bush</h3>

      <p>You can type <code>rose suite-log --name=$ID</code> to launch a web
      browser and view the output of your suite via Rose Bush.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Run the Suite: share and work directories</h3>

      <p>The <samp>share/</samp> sub-directory is used by the tasks in the suite
      to share files over the lifetime of the suite. In this example suite, the
      build created by the <var>fcm_make</var> task can be found here.</p>

      <p>The <samp>share/cycle/</samp> sub-directory is to share files that are
      regularly generated, archived and removed by cycling tasks.</p>

      <p>The <samp>work/</samp> sub-directory contains the working directory
      for the tasks at their run times. It can be used by the tasks to create
      files that are only relevant to the tasks.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Command Help</h3>

      <p>For help with Rose and Rosie commands, see the <a href=
      "rose-command.html">Command Reference</a>.</p>
    </div>

    <div class="slide">
      <h2 id="gui">GUI Tour</h2>

      <p>This section explores working using the Rose system GUIs. You should
      complete the above command line tour before starting this one.</p>
    </div>

    <div class="slide">
      <h3>Suite Discovery GUI</h3>

      <p>We'll use the discovery GUI to find and checkout our example suite.
      Open a Linux/Unix terminal and issue the command:</p>
      <pre class="shell">
rosie go
</pre>

      <p>You should see a list of your checked-out suites as rows in a
      table.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Suite Discovery GUI: toolbar</h3>

      <p>You could find other suites by using the toolbar search and searching
      for text strings, or using the advanced query panel (show it by clicking
      the rightmost toolbar button).</p>

      <p>There are toolbar options to create and copy suites. Copying and other
      actions can be done by right clicking on a suite.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Suite Discovery GUI: checkout and edit</h3>

      <p>Look at the list to find the row that has the suite $ID, project, and
      title from the command line tour. If you double-click on it, your suite
      will be opened using the Rose configuration editor.</p>

      <p>Go ahead and double click on your suite. The config editor GUI will
      now launch.</p>
    </div>

    <div class="slide">
      <h3>Config Editor GUI</h3>

      <p>The config editor should have started up with a view of your
      suite.</p>

      <p>You can see from the toolbar that you can perform actions like
      <samp>Undo</samp>, <samp>Redo</samp> and <samp>Find</samp>.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Config Editor GUI: launch page</h3>

      <p>On the left hand side is a panel containing a tree with named nodes.
      If you expand these, you can see that this represents the suite and
      application configurations. Each section in a configuration is (normally)
      a node here. Navigate to the application section <samp>my_hello_saturn
      -&gt; env</samp> and click on <samp>env</samp>.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Config Editor GUI: alter variable</h3>

      <p>A page should have launched in the right hand panel. This contains
      widgets for altering the <samp>env</samp> section of the application
      <samp>my_hello_saturn</samp>.</p>

      <p>Try altering the value of some of the settings, either using the text
      box or the spin (numeric) buttons. When the settings are a different
      value to the saved ones, their names will change colour. You can
      <samp>Undo</samp> and <samp>Redo</samp> your actions. You can also
      <samp>Save</samp> your changes.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Config Editor GUI: help for variable</h3>

      <p>If you move the mouse over the setting names, you can see some
      descriptive text. You can access further help by clicking the little menu
      button next to the setting name and selecting <samp>Help</samp> or
      <samp>Web Help</samp>.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Config Editor GUI: save</h3>

      <p>The config editor acts as a specialist text editor for Rose
      configuration files - pressing Save in the config editor is the same as
      pressing it in gvim or gedit.</p>

      <p>Rose configuration files dumped through the config editor, <code>rose
      macro</code>, or <code>rose config-dump</code> will be pretty-printed for
      consistency (so diffs are possible), which may mean some extraneous
      whitespace is removed and some sorting is performed if anything is out of
      place.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Config Editor GUI: commit</h3>

      <p>You can commit your suite by launching a terminal then typing
      <samp>fcm commit</samp> in it, in the normal way. You can launch a
      terminal from inside the GUI with <samp>Ctrl-T</samp> or by using the
      menu: <kbd>Tools -&gt; Launch Terminal</kbd>.</p>
    </div>

    <div class="slide">
      <h3 class="alwayshidden">Config Editor GUI: run suite</h3>

      <p>You can run your suite by clicking the <samp>Run Suite</samp> button
      on the toolbar or selecting <kbd>Tools -&gt; Run Suite -&gt;
      Default</kbd> from the top menu. This will invoke <code>rose
      suite-run</code>.</p>
    </div>

    <div class="slide">
      <h2>Further Reading</h2>

      <p>You have finished the brief tour. Why not try the <a href=
      "rose-rug-metadata-tutorial.html">Metadata Tutorial</a> or read more
      about the GUIs at <a href="rose-rug-config-edit.html">Config Editor
      Reference</a> and <a href="rose-rug-rosie-go.html">Rosie Go
      Reference</a>?</p>
    </div>
  </div>
</body>
</html>
