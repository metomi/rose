PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE changeset (
	revision INTEGER NOT NULL, 
	author VARCHAR(1024) NOT NULL, 
	date INTEGER NOT NULL, 
	idx VARCHAR(1024) NOT NULL, 
	branch VARCHAR(1024) NOT NULL, 
	status VARCHAR(2) NOT NULL, 
	from_idx VARCHAR(1024), 
	PRIMARY KEY (revision, idx, branch)
);
CREATE TABLE main (
	idx VARCHAR(1024) NOT NULL, 
	branch VARCHAR(1024) NOT NULL, 
	owner VARCHAR(1024) NOT NULL, 
	project VARCHAR(1024) NOT NULL, 
	title VARCHAR(1024) NOT NULL, 
	PRIMARY KEY (idx, branch)
);
CREATE TABLE optional (
	my_key INTEGER NOT NULL, 
	idx VARCHAR(1024) NOT NULL, 
	branch VARCHAR(1024) NOT NULL, 
	name VARCHAR(1024) NOT NULL, 
	value VARCHAR(1024), 
	PRIMARY KEY (my_key)
);
CREATE TABLE modified (
	my_key INTEGER NOT NULL, 
	revision INTEGER NOT NULL, 
	idx VARCHAR(1024) NOT NULL, 
	branch VARCHAR(1024) NOT NULL, 
	name VARCHAR(1024) NOT NULL, 
	old_value VARCHAR(1024), 
	new_value VARCHAR(1024), 
	PRIMARY KEY (my_key)
);
CREATE TABLE meta (
	name VARCHAR(1024) NOT NULL, 
	value VARCHAR(1024), 
	PRIMARY KEY (name)
);
COMMIT;
