



<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Installation &mdash; Rose Documentation 2.0b2 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/diff_selector.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/grid_table.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/hieroglyph_theme_addons.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/tutorial.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/addons.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/rose-favicon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/js/diff_selector.js"></script>
        <script src="_static/js/minicylc.js"></script>
        <script src="_static/js/spoiler.js"></script>
        <script src="_static/js/addons.js"></script>
        <script src="_static/js/versioning.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting Started" href="getting-started.html" />
    <link rel="prev" title="Rose Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html">
          

          
            
            <img src="_static/rose-logo-crop.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2.0b2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-installation">Quick Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-with-cylc">Installing With Cylc</a></li>
<li class="toctree-l3"><a class="reference internal" href="#non-python-dependencies">Non Python Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-rose">Configuring Rose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-rosie-client">Configuring Rosie Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploying-configuration-metadata">Deploying Configuration Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuring-a-rosie-server">Configuring a Rosie Server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rosie-special-suite"><code class="docutils literal notranslate"><span class="pre">ROSIE</span></code> special suite</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-known-keys-file">Creating a Known Keys File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/rose/index.html">Rose Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheat-sheet.html">Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Rose API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/configuration/index.html">Rose Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/command-reference.html">Command Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/environment-variables.html">Rose Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/other.html">Other Python API Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/rose-bash-library.html">Rose Bash Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/rose-built-in-applications.html">Rose Built-In Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/rose-macro.html">Rose Macro API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/rose-upgrader-macros.html">Rose Upgrade Macro API</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/rosie-web.html">Rosie Web API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="terms.html">Rose Terms Of Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="course/um-ut.html">UM User Tutorial</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Rose Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>Rose runs on Unix-like systems including Linux and MacOS.</p>
<div class="section" id="quick-installation">
<h2>Quick Installation<a class="headerlink" href="#quick-installation" title="Permalink to this headline">¶</a></h2>
<p>With <code class="docutils literal notranslate"><span class="pre">conda</span></code> (recommended):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda install metomi-rose
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">pip</span></code> (you will need to ensure <a class="reference internal" href="#non-python-dependencies">Non Python Dependencies</a> are met):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install metomi-rose
</pre></div>
</div>
<div class="section" id="installing-with-cylc">
<h3>Installing With Cylc<a class="headerlink" href="#installing-with-cylc" title="Permalink to this headline">¶</a></h3>
<p>Rose does not require and is distributed independently of <a class="reference external" href="https://cylc.github.io/">Cylc</a>.</p>
<p>To use Rose with Cylc you will need to install <a class="reference external" href="https://github.com/cylc/cylc-flow">Cylc Flow</a> and <a class="reference external" href="https://github.com/cylc/cylc-rose">Cylc Rose</a>
into the same Python environment as Rose.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">conda</span></code> (recommended):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ conda install cylc-flow cylc-rose
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">pip</span></code> (you will need to ensure <a class="reference internal" href="#non-python-dependencies">Non Python Dependencies</a> are met):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install cylc-flow cylc-rose
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://cylc.github.io/">Cylc</a> is a distributed system, not all dependencies are required on all
platforms.</p>
<p>See the <a class="reference external" href="https://cylc.github.io/">Cylc</a> installation instructions for more information.</p>
</div>
</div>
<div class="section" id="non-python-dependencies">
<h3>Non Python Dependencies<a class="headerlink" href="#non-python-dependencies" title="Permalink to this headline">¶</a></h3>
<p>The following packages are installed by <code class="docutils literal notranslate"><span class="pre">conda</span></code> but not by <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<ul class="simple">
<li><p>FCM</p></li>
<li><p>Perl</p></li>
<li><p>Python3</p></li>
<li><p>Subversion</p></li>
</ul>
<p>If installing via <code class="docutils literal notranslate"><span class="pre">pip</span></code> run <a class="reference internal" href="api/command-reference.html#command-rose-check-software"><span class="std std-ref">rose check-software</span></a> to ensure
non-Python dependencies are satisfied.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Subversion &amp; FCM are required for installing files from Subversion using FCM
keywords by:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rose</span> <span class="pre">app-run</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rose</span> <span class="pre">task-run</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cylc</span> <span class="pre">install</span></code></p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="configuring-rose">
<h2>Configuring Rose<a class="headerlink" href="#configuring-rose" title="Permalink to this headline">¶</a></h2>
<p>Rose configuration files can be located in the following places:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/etc/.metomi/rose.conf</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$ROSE_SITE_CONF_PATH/.metomi/rose.conf</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$HOME/.metomi/rose.conf</span></code></p></li>
</ul>
<p>See <a class="reference internal" href="api/configuration/site-and-user.html#rose:file:rose.conf" title="rose:file:rose.conf"><code class="xref rose rose-file docutils literal notranslate"><span class="pre">rose.conf</span></code></a> in the API reference for more information.</p>
</div>
<div class="section" id="configuring-rosie-client">
<h2>Configuring Rosie Client<a class="headerlink" href="#configuring-rosie-client" title="Permalink to this headline">¶</a></h2>
<p>Rosie is an optional suite storage and discovery system.</p>
<p>Rosie stores suites using Subversion repositories, with databases behind
a web interface for suite discovery and lookup.</p>
<p>If users at your site are able to access Rosie services on the Internet
or if someone else has already configured Rosie services at your site,
all you need to do is configure the client to talk to the servers.</p>
<p>Refer to the <a class="reference internal" href="#configuring-a-rosie-server">Configuring a Rosie Server</a> section if you need to
configure a Rosie server for your site.</p>
<p>To set up the Rosie client for the site, add/modify the
<a class="reference internal" href="api/configuration/site-and-user.html#rose:conf:rose.conf[rosie-id]" title="rose:conf:rose.conf[rosie-id]"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">rose.conf[rosie-id]</span></code></a> E.g.:</p>
<div class="highlight-rose notranslate"><div class="highlight"><pre><span></span><span class="nt">[rosie-id]</span>
<span class="nv">prefix-default</span><span class="o">=</span><span class="s">x</span>
<span class="nv">prefixes-ws-default</span><span class="o">=</span><span class="s">x myorg</span>

<span class="nv">prefix-location.x</span><span class="o">=</span><span class="s">https://somehost.on.the.internet/svn/roses-x</span>
<span class="nv">prefix-web.x</span><span class="o">=</span><span class="s">https://somehost.on.the.internet/trac/roses-x/intertrac/source:</span>
<span class="nv">prefix-ws.x</span><span class="o">=</span><span class="s">https://somehost.on.the.internet/rosie/x</span>

<span class="nv">prefix-location.myorg</span><span class="o">=</span><span class="s">svn://myhost.myorg/roses-myorg</span>
<span class="nv">prefix-web.myorg</span><span class="o">=</span><span class="s">http://myhost.myorg/trac/roses-myorg/intertrac/source:</span>
<span class="nv">prefix-ws.myorg</span><span class="o">=</span><span class="s">http://myhost.myorg/rosie/myorg</span>
</pre></div>
</div>
<p>Check the following:</p>
<ol class="arabic">
<li><p>You can access the Rosie Subversion repository without being prompted
for a username and a password. This may require configuring Subversion
to cache your authentication information with a keyring.</p>
<p><em>(See Subversion Book &gt; Advanced Topics &gt; Network Model &gt; Client
Credentials for a discussion on how to do this.)</em></p>
</li>
<li><p>The Rosie web service is up and running and you can access the Rosie
web service from your computer. E.g. if the Rosie web service is
hosted at <code class="docutils literal notranslate"><span class="pre">https://somehost.on.the.internet/rosie/x</span></code>, you can check
that you have access by typing the following on the command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">I</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">somehost</span><span class="o">.</span><span class="n">on</span><span class="o">.</span><span class="n">the</span><span class="o">.</span><span class="n">internet</span><span class="o">/</span><span class="n">rosie</span><span class="o">/</span><span class="n">x</span>
</pre></div>
</div>
<p>It should return a HTTP code 200. If you are prompted for a username
and a password, you may need to have access to a keyring to cache
the authentication information.</p>
</li>
<li><p>You can access the Rosie web service using the Rosie client. E.g.
using the above configuration for the prefix <code class="docutils literal notranslate"><span class="pre">x</span></code>, type the
following on the command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rosie</span> <span class="n">hello</span> <span class="o">--</span><span class="n">prefix</span><span class="o">=</span><span class="n">x</span>
</pre></div>
</div>
<p>It should return a greeting, e.g. <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">user</span></code>.</p>
</li>
</ol>
</div>
<div class="section" id="deploying-configuration-metadata">
<h2>Deploying Configuration Metadata<a class="headerlink" href="#deploying-configuration-metadata" title="Permalink to this headline">¶</a></h2>
<p>You may want to deploy <a class="reference internal" href="api/configuration/metadata.html#conf-meta"><span class="std std-ref">Configuration Metadata</span></a> for projects using Rose
in a globally readable location at your site, so that they can be
easily accessed by users when using Rose utilities such as
<a class="reference internal" href="api/command-reference.html#command-rose-config-edit"><span class="std std-ref">rose config-edit</span></a> or <a class="reference internal" href="api/command-reference.html#command-rose-macro"><span class="std std-ref">rose macro</span></a>.</p>
<p>If the source tree of a project is version controlled under a
trusted Subversion repository, it is possible to automatically deploy
their configuration metadata. Assuming that the projects follow our
recommendation and store Rose configuration metadata under the
<code class="docutils literal notranslate"><span class="pre">rose-meta/</span></code> directory of their source tree, you can:</p>
<ul class="simple">
<li><p>Check out a working copy for each sub-directory under the
<code class="docutils literal notranslate"><span class="pre">rose-meta/</span></code> directory.</p></li>
<li><p>Set up a crontab job to regularly update the working copies.</p></li>
</ul>
<p>For example, suppose you want to deploy Rose <a class="reference internal" href="api/configuration/metadata.html#metadata"><span class="std std-ref">Configuration Metadata</span></a>
under <code class="docutils literal notranslate"><span class="pre">/etc/rose-meta/</span></code> at your site. You can do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Deployment location
DEST=&#39;/etc/rose-meta&#39;
cd &quot;${DEST}&quot;

# Assume only Rose metadata configuration directories under &quot;rose-meta/&quot;
URL1=&#39;https://somehost/foo/main/trunk/rose-meta&#39;
URL2=&#39;https://anotherhost/bar/main/trunk/rose-meta&#39;
# ...

# Checkout a working copy for each metadata configuration directory
for URL in &quot;${URL1}&quot; &quot;${URL2}&quot;; do
  for NAME in $(svn ls &quot;${URL}&quot;); do
      svn checkout -q &quot;${URL}/${NAME}&quot;
  done
done

# Set up a crontab job to update the working copies, e.g. every 10 minutes
crontab -l || true &gt;&#39;crontab.tmp&#39;
{
  echo &#39;# Update Rose configuration metadata every 10 minutes&#39;
  echo &quot;*/10 * * * * svn update -q ${DEST}/*&quot;
} &gt;&gt;&#39;crontab.tmp&#39;
crontab &#39;crontab.tmp&#39;
rm &#39;crontab.tmp&#39;

# Finally add the root level &quot;meta-path&quot; setting to site&#39;s &quot;rose.conf&quot;
# E.g. if Rose is installed under &quot;/opt/rose/&quot;:
{
  echo &#39;[]&#39;
  echo &quot;meta-path=${DEST}&quot;
} &gt;&gt;&#39;/opt/rose/etc/rose.conf&#39;
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>See also <a class="reference internal" href="api/configuration/metadata.html#app-meta-loc"><span class="std std-ref">Appendix: Metadata Location</span></a>.</p>
</div>
</div>
<div class="section" id="configuring-a-rosie-server">
<h2>Configuring a Rosie Server<a class="headerlink" href="#configuring-a-rosie-server" title="Permalink to this headline">¶</a></h2>
<p>You should only need to configure and run your own Rosie service if you do
not have access to Rosie services on the Internet, or if you need a
private Rosie service for your site. Depending on settings at your
site, you may or may not be able to set up this service.</p>
<p>You will need to select a machine to host the Subversion repositories.
This machine will also host the web server and databases.</p>
<p>Login to your host, create one or more <a class="reference external" href="https://en.wikipedia.org/wiki/Apache_Subversion#FSFS">Subversion FSFS</a> repositories.</p>
<p>If you want to use FCM for your version control, you should set a
special property on the repository to allow branching and merging
with FCM in the Rosie convention. For example, if your repository
is served from <code class="docutils literal notranslate"><span class="pre">HOST_AND_PATH</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">myhost001/svn-repos</span></code>) with
given repository base name <code class="docutils literal notranslate"><span class="pre">NAME</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">roses_foo</span></code>), change into a
new directory and enter the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">svn</span> <span class="n">co</span> <span class="o">-</span><span class="n">q</span> <span class="s2">&quot;svn://$</span><span class="si">{HOST_AND_PATH}</span><span class="s2">/$</span><span class="si">{NAME}</span><span class="s2">/&quot;</span>
<span class="n">svn</span> <span class="n">ps</span> <span class="n">fcm</span><span class="p">:</span><span class="n">layout</span> <span class="o">-</span><span class="n">F</span> <span class="o">-</span> <span class="s2">&quot;$</span><span class="si">{NAME}</span><span class="s2">&quot;</span> <span class="o">&lt;&lt;</span><span class="s1">&#39;__FCM_LAYOUT__&#39;</span>
<span class="n">depth</span><span class="o">-</span><span class="n">project</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">depth</span><span class="o">-</span><span class="n">branch</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">depth</span><span class="o">-</span><span class="n">tag</span> <span class="o">=</span> <span class="mi">1</span>
<span class="nb">dir</span><span class="o">-</span><span class="n">trunk</span> <span class="o">=</span> <span class="n">trunk</span>
<span class="nb">dir</span><span class="o">-</span><span class="n">branch</span> <span class="o">=</span>
<span class="nb">dir</span><span class="o">-</span><span class="n">tag</span> <span class="o">=</span>
<span class="n">level</span><span class="o">-</span><span class="n">owner</span><span class="o">-</span><span class="n">branch</span> <span class="o">=</span>
<span class="n">level</span><span class="o">-</span><span class="n">owner</span><span class="o">-</span><span class="n">tag</span> <span class="o">=</span>
<span class="n">template</span><span class="o">-</span><span class="n">branch</span> <span class="o">=</span>
<span class="n">template</span><span class="o">-</span><span class="n">tag</span> <span class="o">=</span>
<span class="n">__FCM_LAYOUT__</span>
<span class="n">svn</span> <span class="n">ci</span> <span class="o">-</span><span class="n">m</span> <span class="s1">&#39;fcm:layout: defined.&#39;</span> <span class="s2">&quot;$</span><span class="si">{NAME}</span><span class="s2">&quot;</span>
<span class="n">rm</span> <span class="o">-</span><span class="n">fr</span> <span class="s2">&quot;$</span><span class="si">{NAME}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Add the following hook scripts to the repository:</p>
<ul>
<li><p>pre-commit:</p>
<div class="highlight-sub notranslate"><div class="highlight"><pre><span></span><span class="c">#!/usr/bin/env bash</span>
exec <span class="s">&lt;path-to-rose&gt;</span>/sbin/rosa svn-pre-commit &quot;$@&quot;
</pre></div>
</div>
</li>
<li><p>post-commit:</p>
<div class="highlight-sub notranslate"><div class="highlight"><pre><span></span><span class="c">#!/usr/bin/env bash</span>
exec <span class="s">&lt;path-to-rose&gt;</span>/sbin/rosa svn-post-commit &quot;$@&quot;
</pre></div>
</div>
</li>
</ul>
<p>You should replace <code class="docutils literal notranslate"><span class="pre">&lt;path-to-rose&gt;</span></code> with the location of your Rose
installation.</p>
<p>Make sure the hook scripts are executable.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">rosa</span> <span class="pre">svn-post-commit</span></code> command in the <code class="docutils literal notranslate"><span class="pre">post-commit</span></code> hook is used
to populate a database with the suite discovery information as suites
are committed to the repository. Edit the <a class="reference internal" href="api/configuration/site-and-user.html#rose:conf:rose.conf[rosie-db]" title="rose:conf:rose.conf[rosie-db]"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">rose.conf[rosie-db]</span></code></a>
settings to point to your host machine and provide relevant
paths such as the location for your repository and database.</p>
<p>Once you have done that, create the Rosie database by running:</p>
<div class="highlight-sub notranslate"><div class="highlight"><pre><span></span><span class="s">&lt;path-to-rose&gt;</span>/sbin/rosa db-create
</pre></div>
</div>
<p>Make sure that the account that runs the repository hooks has read/write
access to the database and database directory.</p>
<p>You can test that everything is working using the built-in web server.
Edit the <a class="reference internal" href="api/configuration/site-and-user.html#rose:conf:rose.conf[rosie-disco]" title="rose:conf:rose.conf[rosie-disco]"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">rose.conf[rosie-disco]</span></code></a> settings to configure
the web server’s log directory and port number. Start the web server
by running:</p>
<div class="highlight-sub notranslate"><div class="highlight"><pre><span></span>setsid <span class="s">&lt;path-to-rose&gt;</span>/bin/rosie disco start 0<span class="s">&lt;/dev/null 1&lt;/dev/null 2&gt;</span>&amp;1 &amp;
</pre></div>
</div>
<p>Check that the server is up and running using <code class="docutils literal notranslate"><span class="pre">curl</span></code> or a local
web browser. E.g. If you have configured the server’s port to be 1234,
you can do:</p>
<div class="highlight-sub notranslate"><div class="highlight"><pre><span></span>curl -I http://localhost:1234/
</pre></div>
</div>
<p>It should return a HTTP code 200.</p>
<p>Alternatively you can run the Rosie web service under Apache <code class="docutils literal notranslate"><span class="pre">mod_wsgi</span></code>.
To do this you will need to set up an Apache module configuration file
(typically in <code class="docutils literal notranslate"><span class="pre">/etc/httpd/conf.d/rose-wsgi.conf</span></code>) containing the
following (with the paths set appropriately):</p>
<div class="highlight-sub notranslate"><div class="highlight"><pre><span></span>WSGIPythonPath <span class="s">&lt;path-to-rose&gt;</span>/lib/python
WSGIScriptAlias /rosie <span class="s">&lt;path-to-rose&gt;</span>/lib/python/rosie/ws.py
</pre></div>
</div>
<p>Use the Apache log at e.g. <code class="docutils literal notranslate"><span class="pre">/var/log/httpd/</span></code> to debug problems.</p>
<p>Hopefully, you should now have a working Rosie service server. Configure
the client settings by editing the <a class="reference internal" href="api/configuration/site-and-user.html#rose:conf:rose.conf[rosie-id]" title="rose:conf:rose.conf[rosie-id]"><code class="xref rose rose-conf docutils literal notranslate"><span class="pre">rose.conf[rosie-id]</span></code></a>
settings. If you are using the built-in web server, you
should ensure that you include the port number in the URL. E.g.:</p>
<div class="highlight-rose notranslate"><div class="highlight"><pre><span></span><span class="nt">[rosie-id]</span>
<span class="nv">prefix-ws.foo</span><span class="o">=</span><span class="s">http://127.0.0.1:1234/foo</span>
</pre></div>
</div>
<p>You should now be able to talk to the Rosie web service server via
the Rosie web service client. Test by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rosie</span> <span class="n">hello</span>
</pre></div>
</div>
<p>To test that everything is connecting together, create your first
suite in the repository by doing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rosie</span> <span class="n">create</span>
</pre></div>
</div>
<p>which will create the first suite in your repository, with an ID
ending in <code class="docutils literal notranslate"><span class="pre">aa000</span></code> - e.g. <code class="docutils literal notranslate"><span class="pre">foo-aa000</span></code>. Locate it by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rosie</span> <span class="n">lookup</span> <span class="mi">000</span>
</pre></div>
</div>
<div class="section" id="rosie-special-suite">
<h3><code class="docutils literal notranslate"><span class="pre">ROSIE</span></code> special suite<a class="headerlink" href="#rosie-special-suite" title="Permalink to this headline">¶</a></h3>
<p>You can define a special suite in each Rosie repository that provides
some additional repository-specific data and metadata. The suite
ID will end with <code class="docutils literal notranslate"><span class="pre">ROSIE</span></code> - e.g. <code class="docutils literal notranslate"><span class="pre">foo-ROSIE</span></code>.</p>
<p>This can be created by running <code class="docutils literal notranslate"><span class="pre">rosie</span> <span class="pre">create</span> <span class="pre">--meta-suite</span></code>.</p>
</div>
<div class="section" id="creating-a-known-keys-file">
<h3>Creating a Known Keys File<a class="headerlink" href="#creating-a-known-keys-file" title="Permalink to this headline">¶</a></h3>
<p>You can extend the list of search keys used in the Rosie discovery
interfaces (such as <code class="docutils literal notranslate"><span class="pre">rosie</span> <span class="pre">go</span></code>). Create a text file at the root
of a Rosie suite working copy called <code class="docutils literal notranslate"><span class="pre">rosie-keys</span></code>.</p>
<p>Add a space-delimited list of search keys into the file - for example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sub-project experiment model
</pre></div>
</div>
<p>Run <code class="docutils literal notranslate"><span class="pre">fcm</span> <span class="pre">add</span> <span class="pre">-c</span></code> and <code class="docutils literal notranslate"><span class="pre">fcm</span> <span class="pre">commit</span></code>. After the commit, these will be
added to the list of Rosie interface search keys.</p>
<p>You can continue to modify the list by changing the file contents and
committing.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="getting-started.html" class="btn btn-neutral float-right" title="Getting Started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Rose Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright : Copyright (C) British Crown (Met Office) &amp; Contributors. See Terms of Use. This document is released under the Open Government Licence.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note"
     aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Read the Docs</span>
    v: 2.0b2
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions" id="version-selector">
    <script type="text/javascript">
        // NOTE: temporary variables not initiated so that they can be deleted

        // path to a root file in the current version of the documentation
        version_path = ".html".split('/');
        // dirname of the root dir
        version_dir = version_path
            .splice(0, version_path.length - 1)
            .join('/');
        delete version_path;
        // relative path from the current version to the documentation root
        rel_path = '../../';
        // relative path from the current document to the documentation root
        var root_dir;
        if (version_dir) {
            root_dir = version_dir + '/' + rel_path;
        } else {
            root_dir = rel_path;
        }
        delete version_dir;
        delete rel_path;
        // the name of the current version of the documentation
        const current_version = "2.0b2";
        // the name of the builder (i.e. html)
        const current_builder = "html";
        // the name of the current page
        const current_page_name = "installation";
    </script>
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    
<style>
/* make sidebar header off-white. NB: only very light colours work given image
   edge transparency issues, but white itself clashes with the main pages.  */
.wy-side-nav-search, .wy-nav-top {
    background: #f9f9eb;
}
/* make sidebar header version text the dark blue of the Rose logo */
.wy-side-nav-search div.version {
    color: #2B2663;
}
</style>


</body>
</html>