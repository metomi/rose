

<!DOCTYPE html>


<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Other Python API Docs &mdash; Rose Documentation 2.0.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/styles.css" type="text/css" />
    <link rel="stylesheet" href="../_static/single.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <link rel="stylesheet" href="../_static/css/slides-custom.css" type="text/css" />
    
    
    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/single.css" type="text/css" />
    <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/diff_selector.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/grid_table.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/hieroglyph_theme_addons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/tutorial.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/addons.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/diff_selector.js"></script>
    <script type="text/javascript" src="../_static/js/minicylc.js"></script>
    <script type="text/javascript" src="../_static/js/spoiler.js"></script>
    <script type="text/javascript" src="../_static/js/addons.js"></script>
    <script type="text/javascript" src="../_static/js/versioning.js"></script>
    <script type="text/javascript" src="../_static/common.js"></script>
    
    <script type="text/javascript" src="../_static/slides.js"></script>
    <script type="text/javascript" src="../_static/sync.js"></script>
    <script type="text/javascript" src="../_static/controller.js"></script>
    <script type="text/javascript" src="../_static/init.js"></script>
    
    
    <link rel="shortcut icon" href="../_static/rose-favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="Rose Documentation 2.0.0 documentation" href="../index.html" />
    <link rel="next" title="Rose Bash Library" href="rose-bash-library.html" />
    <link rel="prev" title="Rose Environment Variables" href="environment-variables.html" /> 
  </head>
  <body>

<section
   id="slide_container"
   class='slides layout-regular'>


  
<article class="slide level-1" id="module-metomi.rose.reporter">

<h1>Other Python API Docs<a class="headerlink" href="../../html/api/other.html#module-metomi.rose.reporter" title="View HTML">§</a></h1>

<p>Reporter for diagnostic messages.</p>
<dl class="py class">
<dt class="sig sig-object py" id="metomi.rose.reporter.Reporter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">metomi.rose.reporter.</span></code><code class="sig-name descname"><span class="pre">Reporter</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em><span class="n"><span class="pre">contexts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">raise_on_exc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/reporter.html#Reporter"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Report diagnostic messages.</p>
<p>Note: How about the “logging” module in the standard library? It needs a
lot of fiddling to get it working in our reporting model. We want:
* [FAIL] in any verbosity to stderr.
* [WARN] in default verbosity to stderr.
* Raw output to stdout in any verbosity.
* [INFO] in default verbosity to stdout.
* [INFO] in -v verbosity to stdout.
* [INFO] in -vv verbosity to stdout.
* and everything goes to the log file with -vv verbosity by default.</p>
<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.reporter.Reporter.default">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">default</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">verbosity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">reset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/reporter.html#Reporter.default"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return the default reporter.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.reporter.Reporter.format_msg">
<code class="sig-name descname"><span class="pre">format_msg</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">msg</span></span></em>, <em><span class="n"><span class="pre">verbosity</span></span></em>, <em><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">clip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/reporter.html#Reporter.format_msg"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Format a message for reporting.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.reporter.Reporter.report">
<code class="sig-name descname"><span class="pre">report</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">message</span></span></em>, <em><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">level</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">clip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/reporter.html#Reporter.report"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Report a message, if relevant for the reporter contexts.</p>
<dl class="docutils">
<dt>message:</dt><dd>The message to report. An Event, an Exception, an object
with a __str__ method, or a callable that returns an object
with a __str__ method.</dd>
<dt>kind:</dt><dd>The message kind. The default is determined by message.
If it is an Event, the default is message.kind. If it is an
Exception, the default is KIND_ERR. Otherwise, the default
is KIND_OUT.</dd>
<dt>level:</dt><dd>The level of the message. The default is determined by
message. If it is an Event, the default is message.level.
If it is an Exception, the default is FAIL. Otherwise, the
default is DEFAULT.</dd>
<dt>prefix:</dt><dd>Prefix each line of the message with this prefix.
Default is context dependent.</dd>
<dt>clip:</dt><dd>The maximum length of the message to print.</dd>
</dl>
<p>If self.event_handler is defined, self.event_handler with all the
arguments and return its result instead.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-metomi.rose.popen"></span><p>Wraps Python’s subprocess.Popen.</p>
<dl class="py class">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">metomi.rose.popen.</span></code><code class="sig-name descname"><span class="pre">RosePopener</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">event_handler</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Wrap Python’s subprocess.Popen.</p>
<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.get_cmd">
<code class="sig-name descname"><span class="pre">get_cmd</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.get_cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return default options and arguments of a known command as a list.</p>
<p>If a setting [external] &lt;key&gt; is defined in the site/user
configuration, use the setting.</p>
<p>Otherwise, if RosePopener.ENVS_OF_CMDS[key] exists, it looks for each
environment variable in the list in RosePopener.ENVS_OF_CMDS[key] in
order. If the environment variable is defined and is not a null string,
use the value of the environment variable.</p>
<p>Otherwise, return RosePopener.CMDS[key]</p>
<p>key: must be a key of RosePopener.CMDS
args: if specified, will be added to the returned list</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.handle_event">
<code class="sig-name descname"><span class="pre">handle_event</span></code><span class="sig-paren">(</span><em><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.handle_event"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Handle an event using the runner’s event handler.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.list_to_shell_str">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">list_to_shell_str</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.10)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.list_to_shell_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Convert a list of strings into a shell command, escaping whitespace
and quotes, but otherwise allowing special chars so user defined
commands can run without sanitisation.</p>
<p>Examples:
&gt;&gt;&gt; RosePopener.list_to_shell_str([])
‘’
&gt;&gt;&gt; _ = RosePopener.list_to_shell_str([“it’s”])
&gt;&gt;&gt; print(_)
it's
&gt;&gt;&gt; _
“it\’s”
&gt;&gt;&gt; RosePopener.list_to_shell_str([“echo”, “-n”, “Multiple words”])
‘echo -n Multiple\ words’
&gt;&gt;&gt; RosePopener.list_to_shell_str([“ls”, “my_dir;allow_this”])
‘ls my_dir;allow_this’
&gt;&gt;&gt; RosePopener.list_to_shell_str([“what”, “about”, “globs*”])
‘what about globs*’</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.run">
<code class="sig-name descname"><span class="pre">run</span></code><span class="sig-paren">(</span><em><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.run"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Provide a Rose-friendly interface to subprocess.Popen.</p>
<p>Return ret_code, out, err.</p>
<p>If kwargs[“stdin”] is a str, communicate it to the command via a pipe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.run_async">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">run_async</span></code><span class="sig-paren">(</span><em><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.run_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Provide a Rose-friendly interface to subprocess.Popen.</p>
<p>Return ret_code, out, err.</p>
<p>If kwargs[“stdin”] is a str, communicate it to the command via a pipe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.run_bg">
<code class="sig-name descname"><span class="pre">run_bg</span></code><span class="sig-paren">(</span><em><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.run_bg"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Provide a Rose-friendly interface to subprocess.Popen.</p>
<p>Return a subprocess.Popen object.</p>
<p>If kwargs[“stdin”] is a str, turn it into subprocess.PIPE.
However, it cannot communicate stdin to the Popen object,
because the Popen.communicate() method implies a wait().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.run_bg_async">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">run_bg_async</span></code><span class="sig-paren">(</span><em><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.run_bg_async"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Provide a Rose-friendly interface to subprocess.Popen.</p>
<p>Return a subprocess.Popen object.</p>
<p>If kwargs[“stdin”] is a str, turn it into subprocess.PIPE.
However, it cannot communicate stdin to the Popen object,
because the Popen.communicate() method implies a wait().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.run_nohup_gui">
<code class="sig-name descname"><span class="pre">run_nohup_gui</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">cmd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.run_nohup_gui"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Launch+detach a GUI command with nohup.</p>
<p>Launch the GUI command with <cite>nohup bash -c ‘exec …’</cite> redirecting
standard input and outputs from and to <cite>/dev/null</cite>, and setting it to
become a process group leader. Equivalent to a double fork.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cmd</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – command string of the GUI.</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Return (subprocess.Popen):</dt><dd>Return the process object for the “nohup” command.
Return None if no DISPLAY is set.</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.run_ok">
<code class="sig-name descname"><span class="pre">run_ok</span></code><span class="sig-paren">(</span><em><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.run_ok"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Same as RosePopener.run, but raise RosePopenError if ret_code != 1.</p>
<p>Return out, err.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.run_simple">
<code class="sig-name descname"><span class="pre">run_simple</span></code><span class="sig-paren">(</span><em><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.run_simple"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Similar to RosePopener.run_ok, but event handle stdout and stderr.</p>
<p>kwargs[“stderr_level”] – set event level of stderr
kwargs[“stdout_level”] – set event level of stdout</p>
<p>Return None.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.shlex_join">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">shlex_join</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.10)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.shlex_join"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Convert a list of strings into a shell command, safely quoting
when the strings contain whitespace and special chars.</p>
<p>Basically a back-port of shlex.join(), needed for py 3.7.</p>
<p>Examples:
&gt;&gt;&gt; RosePopener.shlex_join([])
‘’
&gt;&gt;&gt; RosePopener.shlex_join([“echo”, “-n”, “Multiple words”])
“echo -n ‘Multiple words’”
&gt;&gt;&gt; RosePopener.shlex_join([“ls”, “my_dir;foiled_injection”])
“ls ‘my_dir;foiled_injection’”
&gt;&gt;&gt; RosePopener.shlex_join([“what”, “about”, “globs*”])
“what about ‘globs*’”</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.popen.RosePopener.which">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">which</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/metomi/rose/popen.html#RosePopener.which"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Search an executable file name in PATH, and return its full path.</p>
<p>If name is an absolute path and is an executable file, return name.
If name is not found in PATH, return None.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-metomi.rose.macros"></span><p>Module to contain internal system macros for operating on a configuration.</p>




</article>

</section>

<section id="slide_notes">

</section>

  </body>
</html>