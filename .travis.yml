# Configuration for running Rose test battery on Travis CI
# See https://travis-ci.org/ for more info.

---
sudo: required
language: python

jobs:
    include:
    - name: "Test Battery"
      python:
        - 2.7
      install:
        - etc/travis-scripts install cylc fcm rose
      script:
        - etc/travis-scripts test-battery

    - name: "Documentation"
      python:
        - 2.7
      install:
        - etc/travis-scripts install docs
      script:
        - etc/travis-scripts test-docs
        - if [[ "${TRAVIS_TAG}" ]]; then etc/travis-scripts prepare-docs-branch; fi
        - etc/travis-scripts build-docs
      after_success:
        - if [[ "${TRAVIS_TAG}" ]]; then etc/travis-scripts deploy-docs; fi
