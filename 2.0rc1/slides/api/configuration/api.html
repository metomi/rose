

<!DOCTYPE html>


<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Rose Configuration API &mdash; Rose Documentation 2.0rc1 documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/styles.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/single.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <link rel="stylesheet" href="../../_static/css/slides-custom.css" type="text/css" />
    
    
    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/single.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/diff_selector.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/grid_table.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/hieroglyph_theme_addons.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/tutorial.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/addons.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/diff_selector.js"></script>
    <script type="text/javascript" src="../../_static/js/minicylc.js"></script>
    <script type="text/javascript" src="../../_static/js/spoiler.js"></script>
    <script type="text/javascript" src="../../_static/js/addons.js"></script>
    <script type="text/javascript" src="../../_static/js/versioning.js"></script>
    <script type="text/javascript" src="../../_static/common.js"></script>
    
    <script type="text/javascript" src="../../_static/slides.js"></script>
    <script type="text/javascript" src="../../_static/sync.js"></script>
    <script type="text/javascript" src="../../_static/controller.js"></script>
    <script type="text/javascript" src="../../_static/init.js"></script>
    
    
    <link rel="shortcut icon" href="../../_static/rose-favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="Rose Documentation 2.0rc1 documentation" href="../../index.html" />
    <link rel="up" title="Rose Configuration" href="index.html" />
    <link rel="next" title="Command Reference" href="../command-reference.html" />
    <link rel="prev" title="File Creation Mode" href="file-creation.html" /> 
  </head>
  <body>

<section
   id="slide_container"
   class='slides layout-regular'>


  
<article class="slide level-1" id="rose-configuration-api">

<h1>Rose Configuration API<a class="headerlink" href="../../../html/api/configuration/api.html#rose-configuration-api" title="View HTML">§</a></h1>





</article>
<article class="slide level-2" id="cli">

<h2>CLI<a class="headerlink" href="../../../html/api/configuration/api.html#cli" title="View HTML">§</a></h2>

<p>The <a class="reference internal" href="../command-reference.html#command-rose-config"><span class="std std-ref">rose config</span></a> command provides a command line tool for
reading, processing and dumping files written in the <a class="reference internal" href="rose-configuration-format.html#rose-configuration-format"><span class="std std-ref">Rose Configuration Format</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span> -e <span class="s2">&quot;</span>
<span class="go">&gt; [foo]</span>
<span class="go">&gt; bar=baz</span>
<span class="go">&gt; &quot; &gt; rose.conf</span>

<span class="gp">$ </span>rose config foo --file rose.conf
<span class="go">bar=baz</span>
</pre></div>
</div>
<p>For more information see the <a class="reference internal" href="../command-reference.html#command-rose-config"><span class="std std-ref">rose config</span></a> command line reference.</p>




</article>
<article class="slide level-2" id="python">

<h2>Python<a class="headerlink" href="../../../html/api/configuration/api.html#python" title="View HTML">§</a></h2>

<p>Rose provides a Python API for loading, processing, editing and dumping Rose
configurations via the <a class="reference internal" href="#module-metomi.rose.config" title="metomi.rose.config"><code class="xref py py-mod docutils literal notranslate"><span class="pre">metomi.rose.config</span></code></a> module located within the
Rose Python library.</p>
<span class="target" id="module-metomi.rose.config"></span><p>Simple INI-style configuration data model, loader and dumper.</p>
<dl class="docutils">
<dt>Synopsis:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a config file.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.conf&#39;</span><span class="p">,</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">_</span> <span class="o">=</span> <span class="n">config_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">[foo]</span>
<span class="gp">... </span><span class="s1">bar=Bar</span>
<span class="gp">... </span><span class="s1">!baz=Baz</span>
<span class="gp">... </span><span class="s1">     &#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load in a config file.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">config_node</span> <span class="o">=</span> <span class="n">load</span><span class="p">(</span><span class="s1">&#39;config.conf&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">ConfigSyntaxError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="c1"># Handle exception.</span>
<span class="gp">... </span>    <span class="k">pass</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Retrieve config settings.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="go">{&#39;value&#39;: &#39;Bar&#39;, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set new config settings.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;new&#39;</span><span class="p">],</span> <span class="s1">&#39;New&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Overwrite existing config settings.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span> <span class="n">state</span><span class="o">=</span><span class="n">ConfigNode</span><span class="o">.</span><span class="n">STATE_NORMAL</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">value</span><span class="o">=</span><span class="s1">&#39;NewBaz&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Write out config to a file.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dump</span><span class="p">(</span><span class="n">config_node</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go">[foo]</span>
<span class="go">bar=Bar</span>
<span class="go">baz=NewBaz</span>
<span class="go">new=New</span>
</pre></div>
</div>
</dd>
<dt>Classes:</dt><dd><table border="1" class="longtable docutils align-default">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">metomi.rose.config.ConfigNode</span></code></a>([value,&nbsp;...])</td>
<td>Represent a node in a configuration file.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#metomi.rose.config.ConfigNodeDiff" title="metomi.rose.config.ConfigNodeDiff"><code class="xref py py-obj docutils literal notranslate"><span class="pre">metomi.rose.config.ConfigNodeDiff</span></code></a>()</td>
<td>Represent differences between two ConfigNode instances.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#metomi.rose.config.ConfigDumper" title="metomi.rose.config.ConfigDumper"><code class="xref py py-obj docutils literal notranslate"><span class="pre">metomi.rose.config.ConfigDumper</span></code></a>([char_assign])</td>
<td>Dumper of a ConfigNode object in Rose INI format.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#metomi.rose.config.ConfigLoader" title="metomi.rose.config.ConfigLoader"><code class="xref py py-obj docutils literal notranslate"><span class="pre">metomi.rose.config.ConfigLoader</span></code></a>([...])</td>
<td>Loader of an INI format configuration into a ConfigNode object.</td>
</tr>
</tbody>
</table>
</dd>
<dt>Functions:</dt><dd><table border="1" class="longtable docutils align-default">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#metomi.rose.config.load" title="metomi.rose.config.load"><code class="xref py py-obj docutils literal notranslate"><span class="pre">metomi.rose.config.load</span></code></a>(source[,&nbsp;root])</td>
<td>Shorthand for <a class="reference internal" href="#metomi.rose.config.ConfigLoader.load" title="metomi.rose.config.ConfigLoader.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">ConfigLoader.load()</span></code></a>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#metomi.rose.config.dump" title="metomi.rose.config.dump"><code class="xref py py-obj docutils literal notranslate"><span class="pre">metomi.rose.config.dump</span></code></a>(root[,&nbsp;target,&nbsp;...])</td>
<td>Shorthand for <a class="reference internal" href="#metomi.rose.config.ConfigDumper.dump" title="metomi.rose.config.ConfigDumper.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">ConfigDumper.dump()</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd>
<dt>Limitations:</dt><dd><ul class="simple">
<li>The loader does not handle trailing comments.</li>
</ul>
</dd>
<dt>What about the standard library ConfigParser? Well, it is problematic:</dt><dd><ul class="simple">
<li>The comment character and style is hard-coded.</li>
<li>The assignment character is hard-coded.</li>
<li>A duplicated section header causes an exception to be raised.</li>
<li>Option keys are transformed to lower case by default.</li>
<li>It is far too complicated and confusing.</li>
</ul>
</dd>
</dl>
<dl class="py exception">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigDecodeError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">ConfigDecodeError</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">path</span></span></em>, <em><span class="n"><span class="pre">unicode_decode_err</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigDecodeError"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Exception that should be raised when loading a configuration file that
is not encoded in a UTF-8 compatible charset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Path to the config file</li>
<li><strong>unicode_decode_err</strong> (<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#UnicodeDecodeError" title="(in Python v3.10)"><em>UnicodeDecodeError</em></a>) – The original exception raised
when doing bytes.decode()</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigDumper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">ConfigDumper</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">char_assign</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'='</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigDumper"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Dumper of a ConfigNode object in Rose INI format.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Baz&#39;</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">comments</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Currently ignored!&#39;</span><span class="p">],</span>
<span class="gp">... </span>                    <span class="n">state</span><span class="o">=</span><span class="n">ConfigNode</span><span class="o">.</span><span class="n">STATE_USER_IGNORED</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dumper</span> <span class="o">=</span> <span class="n">ConfigDumper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dumper</span><span class="p">(</span><span class="n">config_node</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="p">)</span>
<span class="go">[foo]</span>
<span class="go">bar=Bar</span>
<span class="go">#Currently ignored!</span>
<span class="go">!baz=Baz</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigDumper.dump">
<code class="sig-name descname"><span class="pre">dump</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">root</span></span></em>, <em><span class="n"><span class="pre">target=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em>, <em><span class="n"><span class="pre">sort_sections=None</span></span></em>, <em><span class="n"><span class="pre">sort_option_items=None</span></span></em>, <em><span class="n"><span class="pre">env_escape_ok=False</span></span></em>, <em><span class="n"><span class="pre">concat_mode=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigDumper.dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Format a ConfigNode object and write result to target.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>root</strong> (<a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode"><em>ConfigNode</em></a>) – The root config node.</li>
<li><strong>target</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – An open file handle or a string containing a
file path. If not specified, the result is written to
sys.stdout.</li>
<li><strong>sort_sections</strong> (<em>Callable</em>) – An optional argument that should be
a function for sorting a list of section keys.</li>
<li><strong>sort_option_items</strong> (<em>Callable</em>) – An optional argument that
should be a function for sorting a list of option (key, value)
tuples in string values.</li>
<li><strong>env_escape_ok</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – An optional argument to indicate
that $NAME and ${NAME} syntax in values should be escaped.</li>
<li><strong>concat_mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Switch on concatenation mode. If
True, add [] before root level options.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">ConfigError</span></code><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigError"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Base class for config errors.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">ConfigLoader</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">char_assign</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'='</span></span></em>, <em><span class="n"><span class="pre">char_comment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#'</span></span></em>, <em><span class="n"><span class="pre">allow_sections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Loader of an INI format configuration into a ConfigNode object.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.conf&#39;</span><span class="p">,</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">_</span> <span class="o">=</span> <span class="n">config_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">[foo]</span>
<span class="gp">... </span><span class="s1">!bar=Bar</span>
<span class="gp">... </span><span class="s1">baz=Baz</span>
<span class="gp">... </span><span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">ConfigLoader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">config_node</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;config.conf&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">ConfigSyntaxError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">raise</span>  <span class="c1"># Handle exception.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="go">{&#39;value&#39;: &#39;Bar&#39;, &#39;state&#39;: &#39;!&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigLoader.can_miss_opt_conf_key">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><code class="sig-name descname"><span class="pre">can_miss_opt_conf_key</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigLoader.can_miss_opt_conf_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return KEY if key is a string like “(KEY)”, None otherwise.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigLoader.load">
<code class="sig-name descname"><span class="pre">load</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">source</span></span></em>, <em><span class="n"><span class="pre">node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">default_comments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigLoader.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Read a source configuration file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – An open file handle, a string for a file path or
a list of [SECTION]KEY=VALUE items.</li>
<li><strong>node</strong> (<a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode"><em>ConfigNode</em></a>) – A ConfigNode object if specified, otherwise
created.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A new ConfigNode object.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode">ConfigNode</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create example config file.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.conf&#39;</span><span class="p">,</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">_</span> <span class="o">=</span> <span class="n">config_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">[foo]</span>
<span class="gp">... </span><span class="s1"># Some comment</span>
<span class="gp">... </span><span class="s1">!bar=Bar</span>
<span class="gp">... </span><span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load config file.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">ConfigLoader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">config_node</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;config.conf&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">ConfigSyntaxError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">raise</span>  <span class="c1"># Handle exception.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="go">{&#39;value&#39;: &#39;Bar&#39;, &#39;state&#39;: &#39;!&#39;, &#39;comments&#39;: [&#39; Some comment&#39;]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigLoader.load_with_opts">
<code class="sig-name descname"><span class="pre">load_with_opts</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">source</span></span></em>, <em><span class="n"><span class="pre">node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">more_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">used_keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">return_config_map</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em><span class="n"><span class="pre">mark_opt_confs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em><span class="n"><span class="pre">defines</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigLoader.load_with_opts"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Read a source configuration file with optional configurations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – A file path.</li>
<li><strong>node</strong> (<a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode"><em>ConfigNode</em></a>) – A ConfigNode object if specified,
otherwise one is created.</li>
<li><strong>more_keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – A list of additional optional
configuration names. If source is “rose-${TYPE}.conf”, the
file of each name should be “opt/rose-${TYPE}-${NAME}.conf”.</li>
<li><strong>used_keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – If defined, it should be a list for
this method to  append to. The key of each successfully loaded
optional configuration will be appended to the list (unless the
key is already in the list). Missing optional configurations
that are specified in more_keys will not raise an error.
If not defined, any missing optional configuration will
trigger an OSError.</li>
<li><strong>mark_opt_configs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – if True, add comments above any
settings which have been loaded from an optional config.</li>
<li><strong>return_config_map</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True, construct and return
a dict (config_map) containing config names vs their uncombined
nodes. Optional configurations use their opt keys as keys, and
the main configuration uses ‘None’.</li>
<li><strong>defines</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – A list of [SECTION]KEY=VALUE overrides.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>node or (node, config_map):</dt><dd><ul class="simple">
<li>node - The loaded configuration as a ConfigNode.</li>
<li>config_map - A dictionary containing opt_conf_key: ConfigNode
pairs. Only returned if return_config_map is True.</li>
</ul>
</dd>
</dl>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)">tuple</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Write config file.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.conf&#39;</span><span class="p">,</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">_</span> <span class="o">=</span> <span class="n">config_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">[foo]</span>
<span class="gp">... </span><span class="s1">bar=Bar</span>
<span class="gp">... </span><span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Write optional config file (foo).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s1">&#39;opt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;opt/config-foo.conf&#39;</span><span class="p">,</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">opt_config_file</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">_</span> <span class="o">=</span> <span class="n">opt_config_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="s1">[foo]</span>
<span class="gp">... </span><span class="s1">bar=Baz</span>
<span class="gp">... </span><span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">ConfigLoader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="p">,</span> <span class="n">config_map</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_with_opts</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;config.conf&#39;</span><span class="p">,</span> <span class="n">more_keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="n">return_config_map</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="go">&#39;Baz&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">original_config_node</span> <span class="o">=</span> <span class="n">config_map</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">original_config_node</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="go">&#39;Bar&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">optional_config_node</span> <span class="o">=</span> <span class="n">config_map</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">optional_config_node</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="go">&#39;Baz&#39;</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">ConfigNode</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em><span class="n"><span class="pre">comments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Represent a node in a configuration file.</p>
<dl class="docutils">
<dt>Nodes are stored hierarchically, for instance the following config</dt><dd>[foo]
bar = Bar</dd>
</dl>
<p>When loaded by ConfigNode.load(file) would result in three levels of
ConfigNodes, the first representing “root” (i.e. the top level of the
config), one representing the config section “foo” and one representing the
setting “bar”.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a new ConfigNode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Add sub-nodes.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Baz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> 
<span class="go">{&#39;value&#39;: {&#39;foo&#39;: {&#39;value&#39;: {&#39;bar&#39;: {&#39;value&#39;: &#39;Bar&#39;,</span>
<span class="go">                                     &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []},</span>
<span class="go">                             &#39;baz&#39;: {&#39;value&#39;: &#39;Baz&#39;,</span>
<span class="go">                                     &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}},</span>
<span class="go">                   &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}},</span>
<span class="go"> &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set the state of a node.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>                    <span class="n">state</span><span class="o">=</span><span class="n">ConfigNode</span><span class="o">.</span><span class="n">STATE_USER_IGNORED</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get the value of the node at a position.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">])</span>
<span class="go">&#39;Baz&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Walk over the hierarchical structure of a node.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">keys</span> <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span> <span class="ow">in</span> <span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">()]</span>
<span class="go">[[&#39;foo&#39;], [&#39;foo&#39;, &#39;baz&#39;], [&#39;foo&#39;, &#39;bar&#39;]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Walk over the config skipping ignored sections.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">keys</span> <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span> <span class="ow">in</span> <span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">no_ignore</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
<span class="go">[[&#39;foo&#39;], [&#39;foo&#39;, &#39;baz&#39;]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Add two ConfigNode instances to create a new &quot;merged&quot; node.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">another_config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;new&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;New&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_config_node</span> <span class="o">=</span> <span class="n">config_node</span> <span class="o">+</span> <span class="n">another_config_node</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">keys</span> <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span> <span class="ow">in</span> <span class="n">new_config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">()]</span>
<span class="go">[[&#39;&#39;, &#39;new&#39;], [&#39;foo&#39;], [&#39;foo&#39;, &#39;baz&#39;], [&#39;foo&#39;, &#39;bar&#39;]]</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.STATE_NORMAL">
<code class="sig-name descname"><span class="pre">STATE_NORMAL</span></code><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em></dt>
<dd><p>The default state of a ConfigNode.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.STATE_SYST_IGNORED">
<code class="sig-name descname"><span class="pre">STATE_SYST_IGNORED</span></code><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'!!'</span></em></dt>
<dd><p>ConfigNode state if a metadata opperation has logically ignored the
config.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.STATE_USER_IGNORED">
<code class="sig-name descname"><span class="pre">STATE_USER_IGNORED</span></code><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'!'</span></em></dt>
<dd><p>ConfigNode state if it has been specifically ignored in the config.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.add">
<code class="sig-name descname"><span class="pre">add</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">config_diff</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNode.add"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Apply a ConfigNodeDiff object to self.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config_diff</strong> (<a class="reference internal" href="#metomi.rose.config.ConfigNodeDiff" title="metomi.rose.config.ConfigNodeDiff"><em>ConfigNodeDiff</em></a>) – A diff to apply to this ConfigNode.</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create ConfigNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">keys</span> <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span> <span class="ow">in</span> <span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">()]</span>
<span class="go">[[&#39;foo&#39;], [&#39;foo&#39;, &#39;bar&#39;]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create ConfigNodeDiff</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_added_setting</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                   <span class="n">data</span><span class="o">=</span><span class="s1">&#39;Baz&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Apply ConfigNodeDiff to ConfigNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">config_node_diff</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">keys</span> <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span> <span class="ow">in</span> <span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">()]</span>
<span class="go">[[&#39;foo&#39;], [&#39;foo&#39;, &#39;baz&#39;], [&#39;foo&#39;, &#39;bar&#39;]]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.get">
<code class="sig-name descname"><span class="pre">get</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">no_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNode.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return a node at the position of keys, if any.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – A list defining a hierarchy of
node.value ‘keys’. If an entry in keys is the null
string, it is skipped.</li>
<li><strong>no_ignore</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True any ignored nodes will
not be returned.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The config node located at the position of keys or
None.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode">ConfigNode</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create ConfigNode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="s1">&#39;Bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span> <span class="s1">&#39;Baz&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">state</span><span class="o">=</span><span class="n">ConfigNode</span><span class="o">.</span><span class="n">STATE_USER_IGNORED</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># A ConfigNode containing sub-nodes.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">])</span> 
<span class="go">{&#39;value&#39;: {&#39;bar&#39;: {&#39;value&#39;: &#39;Bar&#39;, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []},</span>
<span class="go">           &#39;baz&#39;: {&#39;value&#39;: &#39;Baz&#39;, &#39;state&#39;: &#39;!&#39;, &#39;comments&#39;: []}},</span>
<span class="go"> &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># A bottom level sub-node.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="go">{&#39;value&#39;: &#39;Bar&#39;, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Skip ignored nodes.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">config_node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span> <span class="n">no_ignore</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">None</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.get_filter">
<code class="sig-name descname"><span class="pre">get_filter</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">no_ignore</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNode.get_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return this ConfigNode unless no_ignore and node is ignored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>no_ignore</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True only return this node if it is not
ignored.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">This ConfigNode unless no_ignore and node is ignored.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode">ConfigNode</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get_filter</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="go">{&#39;value&#39;: 42, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get_filter</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="go">{&#39;value&#39;: 42, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">state</span><span class="o">=</span><span class="n">ConfigNode</span><span class="o">.</span><span class="n">STATE_USER_IGNORED</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get_filter</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="go">{&#39;value&#39;: 42, &#39;state&#39;: &#39;!&#39;, &#39;comments&#39;: []}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">config_node</span><span class="o">.</span><span class="n">get_filter</span><span class="p">(</span><span class="kc">True</span><span class="p">))</span>
<span class="go">None</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.get_value">
<code class="sig-name descname"><span class="pre">get_value</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">default</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNode.get_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return the value of a normal node at the position of keys, if any.</p>
<p>If the node does not exist or is ignored, return None.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – A list defining a hierarchy of node.value
‘keys’. If an entry in keys is the null string, it is skipped.</li>
<li><strong>default</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – Return default if the value is not set.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The value of this ConfigNode at the position of keys or
default if not set.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)">object</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create ConfigNode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="s1">&#39;Bar&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get value without specifying keys returns the value of the</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># root ConfigNode (which in this case is a dict of its</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># sub-nodes).</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span> 
<span class="go">{&#39;foo&#39;: {&#39;value&#39;: {&#39;bar&#39;: {&#39;value&#39;: &#39;Bar&#39;, &#39;state&#39;: &#39;&#39;,</span>
<span class="go">                           &#39;comments&#39;: []}},</span>
<span class="go">         &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Intermediate level ConfigNode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">])</span>
<span class="go">{&#39;bar&#39;: {&#39;value&#39;: &#39;Bar&#39;, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Bottom level ConfigNode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="go">&#39;Bar&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># If there is no node located at the position of keys or if</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># that node is unset then the default value is returned.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">... </span>                      <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.is_ignored">
<code class="sig-name descname"><span class="pre">is_ignored</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNode.is_ignored"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return True if current node is in the “ignored” state.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.set">
<code class="sig-name descname"><span class="pre">set</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">state</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">comments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNode.set"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Set node properties at the position of keys, if any.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – A list defining a hierarchy of node.value ‘keys’.
If an entry in keys is the null string, it is skipped.</li>
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – The node.value property to set at this position.</li>
<li><strong>state</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The node.state property to set at this position.
If None, the node.state property is unchanged.</li>
<li><strong>comments</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – The node.comments property to set at this position.
If None, the node.comments property is unchanged.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">This config node.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode">ConfigNode</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create ConfigNode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span>
<span class="go">{&#39;value&#39;: {}, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Add a sub-node at the position &#39;foo&#39; with the comment &#39;Info&#39;.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="n">comments</span><span class="o">=</span><span class="s1">&#39;Info&#39;</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">{&#39;value&#39;: {&#39;foo&#39;: {&#39;value&#39;: {}, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: &#39;Info&#39;}},</span>
<span class="go"> &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set the value for the sub-node at the position</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># &#39;foo&#39; to &#39;Foo&#39;.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Foo&#39;</span><span class="p">)</span>
<span class="gp">... </span>
<span class="go">{&#39;value&#39;: {&#39;foo&#39;: {&#39;value&#39;: &#39;Foo&#39;, &#39;state&#39;: &#39;&#39;,</span>
<span class="go">                   &#39;comments&#39;: &#39;Info&#39;}},</span>
<span class="go"> &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Set the value of the ConfigNode to True, this overwrites all</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># sub-nodes!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">{&#39;value&#39;: True, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.unset">
<code class="sig-name descname"><span class="pre">unset</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNode.unset"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Remove a node at the position of keys, if any.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – A list defining a hierarchy of node.value ‘keys’.
If an entry in keys is the null string, it is skipped.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The ConfigNode instance that was removed, else None.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode">ConfigNode</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create ConfigNode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Foo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Unset without providing any keys does nothing.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">config_node</span><span class="o">.</span><span class="n">unset</span><span class="p">())</span>
<span class="go">None</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Unset with invalid keys does nothing.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">config_node</span><span class="o">.</span><span class="n">unset</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">]))</span>
<span class="go">None</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Unset with valid keys removes the node from the node.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">unset</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">])</span>
<span class="go">{&#39;value&#39;: &#39;Foo&#39;, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span>
<span class="go">{&#39;value&#39;: {}, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNode.walk">
<code class="sig-name descname"><span class="pre">walk</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em><span class="n"><span class="pre">no_ignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNode.walk"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return all keylist - sub-node pairs below keys.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – A list defining a hierarchy of node.value ‘keys’.
If an entry in keys is the null string, it is skipped.</li>
<li><strong>no_ignore</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – If True any ignored nodes will be skipped.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><dl class="first last docutils">
<dt>tuple - (keys, sub_node)</dt><dd><ul class="simple">
<li>keys (list) - A list defining a hierarchy of node.value
‘keys’. If a sub-node is at the top level, and does not
contain any node children, a null string will be
prepended to the returned keylist.</li>
<li>sub_node (ConfigNode) - The config node at the position of
keys.</li>
</ul>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="s1">&#39;Bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span> <span class="s1">&#39;Baz&#39;</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">state</span><span class="o">=</span><span class="n">ConfigNode</span><span class="o">.</span><span class="n">STATE_USER_IGNORED</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Walk over the full hierarchy.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">keys</span> <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span> <span class="ow">in</span> <span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">()]</span>
<span class="go">[[&#39;foo&#39;], [&#39;foo&#39;, &#39;baz&#39;], [&#39;foo&#39;, &#39;bar&#39;]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Walk over one branch of the hierarchy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">keys</span> <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span> <span class="ow">in</span> <span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">])]</span>
<span class="go">[[&#39;foo&#39;, &#39;baz&#39;], [&#39;foo&#39;, &#39;bar&#39;]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Skip over ignored nodes.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">keys</span> <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span> <span class="ow">in</span> <span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">no_ignore</span><span class="o">=</span><span class="kc">True</span><span class="p">)]</span>
<span class="go">[[&#39;foo&#39;], [&#39;foo&#39;, &#39;bar&#39;]]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Invalid/non-existent keys.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">keys</span> <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span> <span class="ow">in</span> <span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;elephant&#39;</span><span class="p">])]</span>
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">ConfigNodeDiff</span></code><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Represent differences between two ConfigNode instances.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a new ConfigNodeDiff.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_added_setting</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                   <span class="n">data</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Bar&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a new ConfigNode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;baz&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Baz&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Apply the diff to the node.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">config_node_diff</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[(</span><span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span><span class="o">.</span><span class="n">get_value</span><span class="p">())</span> <span class="k">for</span> <span class="n">keys</span><span class="p">,</span> <span class="n">sub_node</span> <span class="ow">in</span>
<span class="gp">... </span> <span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">()]</span>
<span class="go">[([&#39;&#39;, &#39;bar&#39;], &#39;Bar&#39;), ([&#39;&#39;, &#39;baz&#39;], &#39;Baz&#39;)]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a ConfigNodeDiff by comparing two ConfigNodes.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">another_config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;NewBar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">another_config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;new&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;New&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_from_configs</span><span class="p">(</span><span class="n">config_node</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">another_config_node</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_added</span><span class="p">()</span>
<span class="go">[((&#39;&#39;, &#39;new&#39;), (&#39;New&#39;, &#39;&#39;, []))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_removed</span><span class="p">()</span>
<span class="go">[((&#39;&#39;, &#39;baz&#39;), (&#39;Baz&#39;, &#39;&#39;, []))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_modified</span><span class="p">()</span>
<span class="go">[((&#39;&#39;, &#39;bar&#39;), ((&#39;Bar&#39;, &#39;&#39;, []), (&#39;NewBar&#39;, &#39;&#39;, [])))]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Inverse a ConfigNodeDiff.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reversed_diff</span> <span class="o">=</span> <span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_reversed</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reversed_diff</span><span class="o">.</span><span class="n">get_added</span><span class="p">()</span>
<span class="go">[((&#39;&#39;, &#39;baz&#39;), (&#39;Baz&#39;, &#39;&#39;, []))]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.delete_removed">
<code class="sig-name descname"><span class="pre">delete_removed</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.delete_removed"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Deletes all ‘removed’ keys from this ConfigNodeDiff.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_removed_setting</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                     <span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">delete_removed</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_removed</span><span class="p">()</span>
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.get_added">
<code class="sig-name descname"><span class="pre">get_added</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.get_added"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return a list of tuples of added keys with their data.</p>
<p>The data is a tuple of value, state, comments, where value is
set to None for sections.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>A list of the form [(keys, data), …]</dt><dd><ul class="simple">
<li>keys - The position of an added setting.</li>
<li>data - Tuple of the form (value, state, comments) of the
properties of the added setting.</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_added_setting</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                   <span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_added</span><span class="p">()</span>
<span class="go">[((&#39;foo&#39;,), (&#39;Foo&#39;, None, None))]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.get_all_keys">
<code class="sig-name descname"><span class="pre">get_all_keys</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.get_all_keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return all keys affected by this ConfigNodeDiff.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list containing any keys affected by this diff as tuples,
e.g. (‘foo’, ‘bar’).</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_added_setting</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">],(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_removed_setting</span><span class="p">([</span><span class="s1">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                     <span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_all_keys</span><span class="p">()</span>
<span class="go">[(&#39;bar&#39;,), (&#39;foo&#39;,)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.get_as_opt_config">
<code class="sig-name descname"><span class="pre">get_as_opt_config</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.get_as_opt_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return a ConfigNode such that main + new_node = main + diff.</p>
<p>Add all the added settings, add all the modified settings,
add all the removed settings as user-ignored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A new ConfigNode instance.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode">ConfigNode</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_added_setting</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                   <span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_removed_setting</span><span class="p">([</span><span class="s1">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                     <span class="p">(</span><span class="s1">&#39;Bar&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_as_opt_config</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">())</span> 
<span class="go">[([&#39;&#39;, &#39;bar&#39;], {&#39;value&#39;: &#39;Bar&#39;, &#39;state&#39;: &#39;!&#39;, &#39;comments&#39;: []}),</span>
<span class="go"> ([&#39;&#39;, &#39;foo&#39;], {&#39;value&#39;: &#39;Foo&#39;, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []})]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.get_modified">
<code class="sig-name descname"><span class="pre">get_modified</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.get_modified"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return a dict of altered keys with before and after data.</p>
<p>The data is a list of two tuples (before and after) of value,
state, comments, where value is set to None for sections.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>A list of the form [(keys, data), …]:</dt><dd><ul class="simple">
<li>keys - The position of an added setting.</li>
<li>data - Tuple of the form (value, state, comments) for the
properties of the setting before the modification.</li>
<li>old_data - The same tuple as data but representing the
properties of the setting after the modification.</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_modified_setting</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;New Foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_modified</span><span class="p">()</span>
<span class="go">[((&#39;foo&#39;,), ((&#39;Foo&#39;, None, None), (&#39;New Foo&#39;, None, None)))]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.get_removed">
<code class="sig-name descname"><span class="pre">get_removed</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.get_removed"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return a dict of removed keys with their data.</p>
<p>The data is a tuple of value, state, comments, where value is
set to None for sections.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>A list of the form <code class="docutils literal notranslate"><span class="pre">[(keys,</span> <span class="pre">data),</span> <span class="pre">...]</span></code>:</dt><dd><ul class="simple">
<li>keys - The position of an added setting.</li>
<li>data - Tuple of the form (value, state, comments) of the
properties of the removed setting.</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)">list</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_removed_setting</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                     <span class="n">data</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_removed</span><span class="p">()</span>
<span class="go">[((&#39;foo&#39;,), (&#39;foo&#39;, None, None))]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.get_reversed">
<code class="sig-name descname"><span class="pre">get_reversed</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.get_reversed"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Return an inverse (add-&gt;remove, etc) copy of this ConfigNodeDiff.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A new ConfigNodeDiff instance.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#metomi.rose.config.ConfigNodeDiff" title="metomi.rose.config.ConfigNodeDiff">ConfigNodeDiff</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create ConfigNodeDiff instance.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_added_setting</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">],(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_removed_setting</span><span class="p">([</span><span class="s1">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                     <span class="p">(</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Generate reversed diff.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reversed_diff</span> <span class="o">=</span> <span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_reversed</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reversed_diff</span><span class="o">.</span><span class="n">get_added</span><span class="p">()</span>
<span class="go">[((&#39;bar&#39;,), (&#39;bar&#39;, None, None))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reversed_diff</span><span class="o">.</span><span class="n">get_removed</span><span class="p">()</span>
<span class="go">[((&#39;foo&#39;,), (&#39;foo&#39;, None, None))]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.set_added_setting">
<code class="sig-name descname"><span class="pre">set_added_setting</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">keys</span></span></em>, <em><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.set_added_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Set a config setting to be “added” in this ConfigNodeDiff.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a>) – The position of the setting to add.</li>
<li><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a>) – A tuple of the form
<code class="docutils literal notranslate"><span class="pre">(value:</span> <span class="pre">object,</span> <span class="pre">state:</span> <span class="pre">string,</span> <span class="pre">comments:</span> <span class="pre">string)</span></code>
for the setting to add.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_added_setting</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span>
<span class="gp">... </span>                                   <span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_added_setting</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">],</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s1">&#39;Bar&#39;</span><span class="p">,</span> <span class="n">ConfigNode</span><span class="o">.</span><span class="n">STATE_USER_IGNORED</span><span class="p">,</span> <span class="s1">&#39;Some Info&#39;</span><span class="p">,))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">config_node_diff</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">config_node</span><span class="o">.</span><span class="n">walk</span><span class="p">())</span> 
<span class="go">[([&#39;&#39;, &#39;foo&#39;], {&#39;value&#39;: &#39;Foo&#39;, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: []}),</span>
<span class="go"> ([&#39;&#39;, &#39;bar&#39;],</span>
<span class="go">  {&#39;value&#39;: &#39;Bar&#39;, &#39;state&#39;: &#39;!&#39;, &#39;comments&#39;: &#39;Some Info&#39;})]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.set_from_configs">
<code class="sig-name descname"><span class="pre">set_from_configs</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">config_node_1</span></span></em>, <em><span class="n"><span class="pre">config_node_2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.set_from_configs"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Create diff data from two ConfigNode instances.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>config_node_1</strong> (<a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode"><em>ConfigNode</em></a>) – The node for which to base the diff
off of.</li>
<li><strong>config_node_2</strong> (<a class="reference internal" href="#metomi.rose.config.ConfigNode" title="metomi.rose.config.ConfigNode"><em>ConfigNode</em></a>) – The “new” node the changes of which
this diff will “apply”.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create two ConfigNode instances to compare.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_1</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node_1</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_2</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node_2</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a ConfigNodeDiff instance.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_from_configs</span><span class="p">(</span><span class="n">config_node_1</span><span class="p">,</span> <span class="n">config_node_2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_added</span><span class="p">()</span>
<span class="go">[((&#39;bar&#39;,), (None, &#39;&#39;, []))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">get_removed</span><span class="p">()</span>
<span class="go">[((&#39;foo&#39;,), (None, &#39;&#39;, []))]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.set_modified_setting">
<code class="sig-name descname"><span class="pre">set_modified_setting</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">keys</span></span></em>, <em><span class="n"><span class="pre">old_data</span></span></em>, <em><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.set_modified_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Set a config setting to be “modified” in this ConfigNodeDiff.</p>
<p>If a property in both the old_data and data (new data) are both set to
None then no change will be made to any pre-existing value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a>) – The position of the setting to add.</li>
<li><strong>old_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a>) – A tuple <code class="docutils literal notranslate"><span class="pre">(value:</span> <span class="pre">object,</span> <span class="pre">state:</span> <span class="pre">str,</span> <span class="pre">comments:</span> <span class="pre">str)</span></code>
for the “current” properties of the setting to modify.</li>
<li><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><em>object</em></a>) – A tuple <code class="docutils literal notranslate"><span class="pre">(value:</span> <span class="pre">object,</span> <span class="pre">state:</span> <span class="pre">str,</span> <span class="pre">comments:</span> <span class="pre">str)</span></code>
for “new” properties to change this setting to.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a ConfigNodeDiff.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_modified_setting</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="p">(</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;New Foo&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a ConfigNode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">comments</span><span class="o">=</span><span class="s1">&#39;Some Info&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Apply the ConfigNodeDiff to the ConfigNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">config_node_diff</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">])</span>
<span class="go">{&#39;value&#39;: &#39;New Foo&#39;, &#39;state&#39;: &#39;&#39;, &#39;comments&#39;: &#39;Some Info&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigNodeDiff.set_removed_setting">
<code class="sig-name descname"><span class="pre">set_removed_setting</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">keys</span></span></em>, <em><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigNodeDiff.set_removed_setting"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Set a config setting to be “removed” in this ConfigNodeDiff.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>keys</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – The position of the setting to add.</li>
<li><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a>) – A tuple <code class="docutils literal notranslate"><span class="pre">(value:</span> <span class="pre">object,</span> <span class="pre">state:</span> <span class="pre">str,</span> <span class="pre">comments:</span> <span class="pre">str)</span></code> of the
properties for the setting to remove.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a ConfigNodeDiff.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span> <span class="o">=</span> <span class="n">ConfigNodeDiff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node_diff</span><span class="o">.</span><span class="n">set_removed_setting</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Create a ConfigNode.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span> <span class="o">=</span> <span class="n">ConfigNode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">config_node</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;Foo&#39;</span><span class="p">,</span>
<span class="gp">... </span>                    <span class="n">comments</span><span class="o">=</span><span class="s1">&#39;Some Info&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Apply the ConfigNodeDiff to the ConfigNode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config_node</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">config_node_diff</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">config_node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]))</span>
<span class="go">None</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigSyntaxError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">ConfigSyntaxError</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">code</span></span></em>, <em><span class="n"><span class="pre">file_name</span></span></em>, <em><span class="n"><span class="pre">line_num</span></span></em>, <em><span class="n"><span class="pre">col_num</span></span></em>, <em><span class="n"><span class="pre">line</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#ConfigSyntaxError"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Exception raised for syntax error loading a configuration file.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigSyntaxError.exc.code">
<code class="sig-prename descclassname"><span class="pre">exc.</span></code><code class="sig-name descname"><span class="pre">code</span></code></dt>
<dd><p>Error code. Can be one of:
ConfigSyntaxError.BAD_CHAR (bad characters in a name)
ConfigSyntaxError.BAD_SYNTAX (general syntax error)</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigSyntaxError.exc.file_name">
<code class="sig-prename descclassname"><span class="pre">exc.</span></code><code class="sig-name descname"><span class="pre">file_name</span></code></dt>
<dd><p>The name of the file that triggers the error.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigSyntaxError.exc.line_num">
<code class="sig-prename descclassname"><span class="pre">exc.</span></code><code class="sig-name descname"><span class="pre">line_num</span></code></dt>
<dd><p>The line number (from 1) in the file with the error.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigSyntaxError.exc.col_num">
<code class="sig-prename descclassname"><span class="pre">exc.</span></code><code class="sig-name descname"><span class="pre">col_num</span></code></dt>
<dd><p>The column number (from 0) in the line with the error.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="metomi.rose.config.ConfigSyntaxError.exc.line">
<code class="sig-prename descclassname"><span class="pre">exc.</span></code><code class="sig-name descname"><span class="pre">line</span></code></dt>
<dd><p>The content of the line that contains the error.</p>
</dd></dl>

<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.conf&#39;</span><span class="p">,</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">config_file</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">_</span> <span class="o">=</span> <span class="n">config_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;[foo][foo]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">ConfigLoader</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;config.conf&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">ConfigSyntaxError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Error (</span><span class="si">%s</span><span class="s1">) in file &quot;</span><span class="si">%s</span><span class="s1">&quot; at </span><span class="si">%s</span><span class="s1">:</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span>
<span class="gp">... </span>        <span class="n">exc</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="n">file_name</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="n">line_num</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="n">col_num</span><span class="p">))</span>
<span class="gp">... </span>
<span class="go">Error (BAD_CHAR) in file &quot;...&quot; at 1:5</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="metomi.rose.config.dump">
<code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">dump</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">root</span></span></em>, <em><span class="n"><span class="pre">target=&lt;_io.TextIOWrapper</span> <span class="pre">name='&lt;stdout&gt;'</span> <span class="pre">mode='w'</span> <span class="pre">encoding='utf-8'&gt;</span></span></em>, <em><span class="n"><span class="pre">sort_sections=None</span></span></em>, <em><span class="n"><span class="pre">sort_option_items=None</span></span></em>, <em><span class="n"><span class="pre">env_escape_ok=False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#dump"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Shorthand for <a class="reference internal" href="#metomi.rose.config.ConfigDumper.dump" title="metomi.rose.config.ConfigDumper.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">ConfigDumper.dump()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="metomi.rose.config.load">
<code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">load</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">source</span></span></em>, <em><span class="n"><span class="pre">root</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#load"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Shorthand for <a class="reference internal" href="#metomi.rose.config.ConfigLoader.load" title="metomi.rose.config.ConfigLoader.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">ConfigLoader.load()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="metomi.rose.config.sort_element">
<code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">sort_element</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">elem_1</span></span></em>, <em><span class="n"><span class="pre">elem_2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#sort_element"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Sort pieces of text, numerically if possible.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="metomi.rose.config.sort_settings">
<code class="sig-prename descclassname"><span class="pre">metomi.rose.config.</span></code><code class="sig-name descname"><span class="pre">sort_settings</span></code><span class="sig-paren">(</span><em><span class="n"><span class="pre">setting_1</span></span></em>, <em><span class="n"><span class="pre">setting_2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/metomi/rose/config.html#sort_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a></dt>
<dd><p>Sort sections and options, by numeric element if possible.</p>
</dd></dl>





</article>

</section>

<section id="slide_notes">

</section>

  </body>
</html>